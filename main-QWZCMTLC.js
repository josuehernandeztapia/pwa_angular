import{a as Ue,b as He}from"./chunk-DYOXCRTF.js";import{a as We}from"./chunk-O54BG3VU.js";import{a as ie}from"./chunk-NH6JDP7H.js";import{a as dt,b as Le}from"./chunk-AU7HQ5J5.js";import{a as ne}from"./chunk-XIPGL6BB.js";import{c as ee,d as ue,e as $e,f as me,g as Ve,h as ze,i as Re,j as Fe,l as je,m as R,o as Be,p as te}from"./chunk-SCHFUJ5K.js";import"./chunk-YYSQDTD3.js";import"./chunk-QCEAPM7G.js";import{A as J,Cb as Te,E as N,Ea as c,Eb as Ae,Fa as T,G as _e,Gb as De,I as xe,Ja as Se,M as Ce,Q as D,R as we,S as $,Sa as u,Ta as Ee,Ua as p,V as C,Wa as y,Xb as L,Y as ye,Ya as r,Yb as q,Za as o,Zb as X,_ as w,_a as P,bb as _,bc as G,c as ve,cb as f,db as m,dc as pe,ea as V,eb as Oe,f as Z,fb as Ie,g as A,gb as Ne,ha as ke,ib as l,j as W,jb as v,k as O,kb as H,ma as g,n as I,na as h,r as be,s as se,sa as Pe,sb as z,ta as Me,u as ce,vb as M,wb as S,x as le,y as U,z as k,za as de}from"./chunk-5IDTUAMZ.js";import{a as B,b as ae,f as lt,g as b}from"./chunk-DM275RSA.js";var Y="Service workers are disabled or not supported by this browser";function pt(i){return se(()=>O(new Error(i)))}var K=class{constructor(s){if(this.serviceWorker=s,!s)this.worker=this.events=this.registration=pt(Y);else{let t=ce(s,"controllerchange").pipe(I(()=>s.controller)),n=se(()=>W(s.controller)),a=be(n,t);this.worker=a.pipe(k(j=>!!j)),this.registration=this.worker.pipe(D(()=>s.getRegistration()));let he=ce(s,"message").pipe(I(j=>j.data)).pipe(k(j=>j&&j.type)).pipe(Ce());he.connect(),this.events=he}}postMessage(s,e){return this.worker.pipe(N(1),$(t=>{t.postMessage(B({action:s},e))})).toPromise().then(()=>{})}postMessageWithOperation(s,e,t){let n=this.waitForOperationCompleted(t),a=this.postMessage(s,e);return Promise.all([a,n]).then(([,d])=>d)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(s){let e;return typeof s=="string"?e=t=>t.type===s:e=t=>s.includes(t.type),this.events.pipe(k(e))}nextEventOfType(s){return this.eventsOfType(s).pipe(N(1))}waitForOperationCompleted(s){return this.eventsOfType("OPERATION_COMPLETED").pipe(k(e=>e.nonce===s),N(1),I(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},fe=(()=>{class i{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new Z,!e.isEnabled){this.messages=U,this.notificationClicks=U,this.subscription=U;return}this.messages=this.sw.eventsOfType("PUSH").pipe(I(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(I(n=>n.data)),this.pushManager=this.sw.registration.pipe(I(n=>n.pushManager));let t=this.pushManager.pipe(D(n=>n.getSubscription()));this.subscription=le(t,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Y));let t={userVisibleOnly:!0},n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(n.length));for(let d=0;d<n.length;d++)a[d]=n.charCodeAt(d);return t.applicationServerKey=a,this.pushManager.pipe(D(d=>d.subscribe(t)),N(1)).toPromise().then(d=>(this.subscriptionChanges.next(d),d))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Y));let e=t=>{if(t===null)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(n=>{if(!n)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(N(1),D(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(t){return new(t||i)(w(K))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac})}}return i})(),ut=(()=>{class i{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=U,this.unrecoverable=U;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Y));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Y));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(t){return new(t||i)(w(K))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac})}}return i})();var qe=new ye("");function mt(i,s,e,t){return()=>{if(!(pe(t)&&"serviceWorker"in navigator&&e.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let n;if(typeof e.registrationStrategy=="function")n=e.registrationStrategy();else{let[d,...F]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":n=W(null);break;case"registerWithDelay":n=Ge(+F[0]||0);break;case"registerWhenStable":n=F[0]?le(Ke(i),Ge(+F[0])):Ke(i);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}i.get(Se).runOutsideAngular(()=>n.pipe(N(1)).subscribe(()=>navigator.serviceWorker.register(s,{scope:e.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function Ge(i){return W(null).pipe(_e(i))}function Ke(i){return i.get(Ae).isStable.pipe(k(e=>e))}function ft(i,s){return new K(pe(s)&&i.enabled!==!1?navigator.serviceWorker:void 0)}var Q=class{};function Je(i,s={}){return ke([fe,ut,{provide:qe,useValue:i},{provide:Q,useValue:s},{provide:K,useFactory:ft,deps:[Q,de]},{provide:Te,useFactory:mt,deps:[Pe,qe,Q,de],multi:!0}])}var x=(()=>{class i{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.checkAuthStatus(t.url)}canActivateChild(e,t){return this.canActivate(e,t)}checkAuthStatus(e){return this.authService.isAuthenticated$.pipe($(t=>{t||(console.log("User not authenticated, redirecting to login"),this.handleUnauthenticatedUser(e))}),I(t=>t&&this.authService.isTokenExpired()?(console.log("Token expired, attempting refresh"),this.attemptTokenRefresh(),!1):t),J(t=>(console.error("Auth guard error:",t),this.handleUnauthenticatedUser(e),W(!1))))}handleUnauthenticatedUser(e){e&&e!=="/"&&localStorage.setItem("redirectUrl",e),this.router.navigate(["/login"])}attemptTokenRefresh(){this.authService.refreshToken().subscribe({next:()=>{console.log("Token refreshed successfully")},error:e=>{console.error("Token refresh failed:",e),this.router.navigate(["/login"])}})}static{this.\u0275fac=function(t){return new(t||i)(w(ie),w(R))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Qe=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-3NDRQL4K.js").then(i=>i.LoginComponent),title:"Iniciar Sesi\xF3n - Conductores PWA"},{path:"register",loadComponent:()=>import("./chunk-XWWBIGM4.js").then(i=>i.RegisterComponent),title:"Registro de Asesor - Conductores PWA"},{path:"verify-email",loadComponent:()=>import("./chunk-5OOPFZQC.js").then(i=>i.VerifyEmailComponent),title:"Verificar Email - Conductores PWA"},{path:"dashboard",loadComponent:()=>import("./chunk-72UD43C2.js").then(i=>i.DashboardComponent),canActivate:[x],title:"Dashboard - Conductores PWA"},{path:"nueva-oportunidad",loadComponent:()=>import("./chunk-IP5GLHYF.js").then(i=>i.NuevaOportunidadComponent),canActivate:[x],title:"Nueva Oportunidad - Conductores PWA"},{path:"document-upload",loadComponent:()=>import("./chunk-WK5AEECK.js").then(i=>i.DocumentUploadFlowComponent),canActivate:[x],title:"Carga de Documentos - Conductores PWA"},{path:"cotizador",canActivate:[x],children:[{path:"",loadComponent:()=>import("./chunk-G4MLUK3A.js").then(i=>i.CotizadorMainComponent),title:"Cotizador - Conductores PWA"},{path:"ags-individual",loadComponent:()=>import("./chunk-CQKTRJWL.js").then(i=>i.AgsIndividualComponent),title:"Cotizador AGS Individual - Conductores PWA"},{path:"edomex-colectivo",loadComponent:()=>import("./chunk-GTTPPJKY.js").then(i=>i.EdomexColectivoComponent),title:"Cotizador EdoMex Colectivo - Conductores PWA"}]},{path:"simulador",canActivate:[x],children:[{path:"",loadComponent:()=>import("./chunk-HEMXNNTY.js").then(i=>i.SimuladorMainComponent),title:"Simulador - Conductores PWA"},{path:"ags-ahorro",loadComponent:()=>import("./chunk-HWSP5UYY.js").then(i=>i.AgsAhorroComponent),title:"Simulador AGS Ahorro - Conductores PWA"},{path:"edomex-individual",loadComponent:()=>import("./chunk-34QRO63T.js").then(i=>i.EdomexIndividualComponent),title:"Simulador EdoMex Individual - Conductores PWA"},{path:"tanda-colectiva",loadComponent:()=>import("./chunk-UPM272H2.js").then(i=>i.TandaColectivaComponent),title:"Simulador Tanda Colectiva - Conductores PWA"}]},{path:"clientes",canActivate:[x],children:[{path:"",loadComponent:()=>import("./chunk-LEJMGEYN.js").then(i=>i.ClientesListComponent),title:"Clientes - Conductores PWA"},{path:"nuevo",loadComponent:()=>import("./chunk-RKWZ6Y5W.js").then(i=>i.ClienteFormComponent),title:"Nuevo Cliente - Conductores PWA"},{path:":id",loadComponent:()=>import("./chunk-RRTT5P4T.js").then(i=>i.ClienteDetailComponent),title:"Detalle Cliente - Conductores PWA"},{path:":id/edit",loadComponent:()=>import("./chunk-RKWZ6Y5W.js").then(i=>i.ClienteFormComponent),title:"Editar Cliente - Conductores PWA"}]},{path:"ops",canActivate:[x],children:[{path:"deliveries",loadComponent:()=>import("./chunk-76DM3BBZ.js").then(i=>i.OpsDeliveriesComponent),title:"Centro de Operaciones - Entregas"},{path:"deliveries/:id",loadComponent:()=>import("./chunk-6KGMJASP.js").then(i=>i.DeliveryDetailComponent),title:"Detalle de Entrega - Operaciones"},{path:"triggers",loadComponent:()=>import("./chunk-COVEPJYQ.js").then(i=>i.TriggersMonitorComponent),title:"Monitor de Triggers Autom\xE1ticos - Operaciones"}]},{path:"tracking",canActivate:[x],children:[{path:"client/:clientId",loadComponent:()=>import("./chunk-ULRFV73R.js").then(i=>i.ClientTrackingComponent),title:"Seguimiento de tu Vagoneta"}]},{path:"expedientes",loadComponent:()=>import("./chunk-WUDE35KJ.js").then(i=>i.ExpedientesComponent),canActivate:[x],title:"Expedientes - Conductores PWA"},{path:"proteccion",loadComponent:()=>import("./chunk-ZNQRWVBG.js").then(i=>i.ProteccionComponent),canActivate:[x],title:"Protecci\xF3n - Conductores PWA"},{path:"oportunidades",loadComponent:()=>import("./chunk-2UPQZ4UN.js").then(i=>i.OpportunitiesPipelineComponent),canActivate:[x],title:"Pipeline de Oportunidades - Conductores PWA"},{path:"reportes",loadComponent:()=>import("./chunk-FNAIW7UY.js").then(i=>i.ReportesComponent),canActivate:[x],title:"Reportes - Conductores PWA"},{path:"productos",loadComponent:()=>import("./chunk-ZAKV7S3F.js").then(i=>i.ProductosCatalogComponent),canActivate:[x],title:"Cat\xE1logo de Productos - Conductores PWA"},{path:"configuracion",loadComponent:()=>import("./chunk-AJ4HR3KM.js").then(i=>i.ConfiguracionComponent),canActivate:[x],title:"Configuraci\xF3n - Conductores PWA"},{path:"perfil",loadComponent:()=>import("./chunk-JRARQ4XC.js").then(i=>i.PerfilComponent),canActivate:[x],title:"Mi Perfil - Conductores PWA"},{path:"404",loadComponent:()=>import("./chunk-PJSS3XSS.js").then(i=>i.NotFoundComponent),title:"P\xE1gina no encontrada - Conductores PWA"},{path:"unauthorized",loadComponent:()=>import("./chunk-DBNQWQ5R.js").then(i=>i.UnauthorizedComponent),title:"No autorizado - Conductores PWA"},{path:"**",redirectTo:"/404"}];var Ye=(()=>{class i{constructor(e,t){this.authService=e,this.router=t,this.isRefreshing=!1,this.refreshTokenSubject=new A(null)}intercept(e,t){let n=e,a=this.authService.getToken();return a&&!this.isPublicUrl(e.url)&&(n=this.addToken(e,a)),!e.url.includes("assets/")&&typeof window<"u"&&window.ng&&window.ng.probe&&console.log(`\u{1F310} HTTP ${e.method} ${e.url}`),t.handle(n).pipe($(d=>{d instanceof ee&&!e.url.includes("assets/")&&typeof window<"u"&&window.ng&&window.ng.probe&&console.log(`\u2705 HTTP ${e.method} ${e.url} - ${d.status}`)}),J(d=>(console.error(`\u274C HTTP ${e.method} ${e.url} - ${d.status}`,d),d.status===401?this.handle401Error(n,t):d.status===403?this.handle403Error():d.status>=500?this.handle5xxError(d):d.status===0?this.handleNetworkError():O(()=>d))))}addToken(e,t){return e.clone({setHeaders:{Authorization:`Bearer ${t}`,"Content-Type":e.headers.get("Content-Type")||"application/json",Accept:"application/json","X-Client-Version":"1.0.0","X-Client-Platform":"web"}})}isPublicUrl(e){return["/api/auth/login","/api/auth/register","/api/auth/forgot-password","/api/auth/reset-password","/api/public/","assets/"].some(n=>e.includes(n))}handle401Error(e,t){return this.isRefreshing?this.refreshTokenSubject.pipe(k(n=>n!=null),N(1),D(n=>t.handle(this.addToken(e,n)))):(this.isRefreshing=!0,this.refreshTokenSubject.next(null),localStorage.getItem("refresh_token")?this.authService.refreshToken().pipe(D(a=>{this.isRefreshing=!1;let d=a?.token;if(!d)throw new Error("Invalid token refresh response");return this.refreshTokenSubject.next(d),t.handle(this.addToken(e,d))}),J(a=>(this.isRefreshing=!1,this.authService.logout(),this.router.navigate(["/login"]),O(()=>new Error("Session expired. Please login again."))))):(this.isRefreshing=!1,this.authService.logout(),this.router.navigate(["/login"]),O(()=>new Error("No refresh token available."))))}handle403Error(){return this.router.navigate(["/unauthorized"]),O(()=>new Error("Access denied. You do not have permission to access this resource."))}handle5xxError(e){let t="Server error. Please try again later.";return console.error("Server Error Details:",{status:e.status,statusText:e.statusText,url:e.url,message:e.message,error:e.error}),this.showErrorToast(t),O(()=>new Error(t))}handleNetworkError(){let e="Network error. Please check your internet connection.";return console.error("Network Error: No internet connection or server unreachable"),this.showErrorToast(e),O(()=>new Error(e))}showErrorToast(e){console.warn("Error Toast:",e),"Notification"in window&&Notification.permission==="granted"&&new Notification("Conductores PWA",{body:e,icon:"/assets/icons/icon-192x192.png"})}static{this.\u0275fac=function(t){return new(t||i)(w(ie),w(R))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac})}}return i})();var Ze=(()=>{class i{constructor(e){this.loadingService=e,this.activeRequests=0,this.skipLoadingUrls=["/api/heartbeat","/api/health","/api/ping","assets/",".json"]}intercept(e,t){if(this.shouldSkipLoading(e.url))return t.handle(e);this.activeRequests++,this.activeRequests===1&&this.loadingService.show();let n=Date.now();return t.handle(e).pipe($({next:a=>{if(a instanceof ee){let d=Date.now()-n;console.log(`\u23F1\uFE0F Request completed in ${d}ms: ${e.method} ${e.url}`)}},error:a=>{let d=Date.now()-n;console.error(`\u23F1\uFE0F Request failed after ${d}ms: ${e.method} ${e.url}`,a)}}),xe(()=>{this.activeRequests--,this.activeRequests===0&&this.loadingService.hide()}))}shouldSkipLoading(e){return this.skipLoadingUrls.some(t=>e.includes(t))}static{this.\u0275fac=function(t){return new(t||i)(w(We))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac})}}return i})();var Xe=(()=>{class i{constructor(){this.errorsSubject=new A([]),this.errors$=this.errorsSubject.asObservable()}handleError(e){console.error("Global Error Handler:",e);let t="An unexpected error occurred",n="error";e instanceof ue?t=this.getHttpErrorMessage(e):e instanceof Error?t=e.message||t:typeof e=="string"&&(t=e);let a={id:this.generateErrorId(),message:t,type:n,timestamp:new Date,details:e,actions:this.getErrorActions(e)};this.addError(a),this.logToExternalService(a)}addError(e){let t=this.errorsSubject.value;this.errorsSubject.next([...t,e]),e.type!=="error"&&setTimeout(()=>{this.removeError(e.id)},1e4)}removeError(e){let n=this.errorsSubject.value.filter(a=>a.id!==e);this.errorsSubject.next(n)}clearAllErrors(){this.errorsSubject.next([])}showSuccess(e,t=5e3){let n={id:this.generateErrorId(),message:e,type:"success",timestamp:new Date};this.addError(n),setTimeout(()=>{this.removeError(n.id)},t)}showInfo(e,t=7e3){let n={id:this.generateErrorId(),message:e,type:"info",timestamp:new Date};this.addError(n),setTimeout(()=>{this.removeError(n.id)},t)}showWarning(e,t){let n={id:this.generateErrorId(),message:e,type:"warning",timestamp:new Date,actions:t};this.addError(n)}handleHttpError(e){let t=this.getHttpErrorMessage(e),n={id:this.generateErrorId(),message:t,type:"error",timestamp:new Date,details:{status:e.status,statusText:e.statusText,url:e.url,error:e.error},actions:this.getHttpErrorActions(e)};return this.addError(n),n}handleBusinessError(e,t,n){let a={id:this.generateErrorId(),message:e,type:"warning",timestamp:new Date,details:t,actions:n};return this.addError(a),a}handleValidationError(e,t){let n={id:this.generateErrorId(),message:e,type:"warning",timestamp:new Date,details:{fieldErrors:t}};return this.addError(n),n}generateErrorId(){return`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getHttpErrorMessage(e){switch(e.status){case 0:return"No se puede conectar al servidor. Verifica tu conexi\xF3n a internet.";case 400:return e.error?.message||"Datos inv\xE1lidos enviados al servidor.";case 401:return"Sesi\xF3n expirada. Por favor inicia sesi\xF3n nuevamente.";case 403:return"No tienes permisos para realizar esta acci\xF3n.";case 404:return"El recurso solicitado no fue encontrado.";case 409:return"Conflicto con el estado actual del recurso.";case 422:return e.error?.message||"Los datos enviados no son v\xE1lidos.";case 429:return"Demasiadas solicitudes. Intenta nuevamente en unos minutos.";case 500:return"Error interno del servidor. Intenta nuevamente m\xE1s tarde.";case 502:return"El servidor no est\xE1 disponible temporalmente.";case 503:return"Servicio no disponible. El servidor est\xE1 en mantenimiento.";case 504:return"Tiempo de espera agotado. El servidor tard\xF3 demasiado en responder.";default:return e.error?.message||`Error del servidor (${e.status}). Intenta nuevamente.`}}getErrorActions(e){return e instanceof ue?this.getHttpErrorActions(e):[{label:"Reintentar",action:()=>{window.location.reload()},style:"primary"}]}getHttpErrorActions(e){let t=[];switch(e.status){case 0:t.push({label:"Reintentar",action:()=>window.location.reload(),style:"primary"});break;case 401:t.push({label:"Iniciar Sesi\xF3n",action:()=>{localStorage.removeItem("auth_token"),window.location.href="/login"},style:"primary"});break;case 403:t.push({label:"Contactar Soporte",action:()=>{window.open("mailto:soporte@conductores.com","_blank")},style:"secondary"});break;case 500:case 502:case 503:case 504:t.push({label:"Reintentar",action:()=>window.location.reload(),style:"primary"},{label:"Reportar Problema",action:()=>{window.open("mailto:soporte@conductores.com?subject=Error del Servidor","_blank")},style:"secondary"});break}return t}logToExternalService(e){typeof window<"u"&&window.location.hostname!=="localhost"&&console.log("Would log to external service:",e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var et=lt(dt()),tt={providers:[Be(Qe),Ve(ze()),Je("ngsw-worker.js",{enabled:ne.production,registrationStrategy:"registerWhenStable:30000"}),{provide:me,useClass:Ye,multi:!0},{provide:me,useClass:Ze,multi:!0},{provide:Me,useClass:Xe},He,Ue,{provide:Le,useValue:et.createWorker}]};var oe=(()=>{class i{constructor(e,t){this.swPush=e,this.http=t,this.baseUrl=ne.apiUrl,this.vapidKey="BF8Q_rBv2d2wQc7k8Kh4Dm1cJ3z2b7Rm4nFjQ-8rTxF5vN9pKjHgFdSaQwEr7Ty6uI3oP1qW5eR2tY7uI8oP0aS",this.isSupported=!1,this.permission$=new A("default"),this.subscription$=new A(null),this.notifications$=new A([]),this.checkSupport(),this.loadStoredNotifications()}checkSupport(){this.isSupported=this.swPush.isEnabled&&"Notification"in window,this.isSupported&&(this.permission$.next(Notification.permission),this.loadExistingSubscription())}get pushSupported(){return this.isSupported}get permission(){return this.permission$.asObservable()}get currentSubscription(){return this.subscription$.asObservable()}get notificationHistory(){return this.notifications$.asObservable()}requestPermission(){return b(this,null,function*(){if(!this.isSupported)throw new Error("Push notifications not supported");let e=yield Notification.requestPermission();return this.permission$.next(e),e==="granted"&&(yield this.subscribeToNotifications()),e})}subscribeToNotifications(){return b(this,null,function*(){try{if(!this.isSupported||Notification.permission!=="granted")return null;let e=yield this.swPush.requestSubscription({serverPublicKey:this.vapidKey});if(e){let t={endpoint:e.endpoint,keys:{p256dh:this.arrayBufferToBase64(e.getKey("p256dh")),auth:this.arrayBufferToBase64(e.getKey("auth"))},user_id:this.getCurrentUserId(),device_info:this.getDeviceInfo(),active:!0},n=yield this.savePushSubscription(t);return this.subscription$.next(n),localStorage.setItem("push_subscription",JSON.stringify(n)),n}}catch(e){throw console.error("Failed to subscribe to notifications:",e),e}return null})}unsubscribeFromNotifications(){return b(this,null,function*(){try{let e=this.subscription$.value;return e&&(yield this.removePushSubscription(e.subscription_id)),yield this.swPush.unsubscribe(),this.subscription$.next(null),localStorage.removeItem("push_subscription"),!0}catch(e){return console.error("Failed to unsubscribe from notifications:",e),!1}})}loadExistingSubscription(){let e=localStorage.getItem("push_subscription");if(e)try{let t=JSON.parse(e);this.subscription$.next(t)}catch{localStorage.removeItem("push_subscription")}}savePushSubscription(e){return b(this,null,function*(){return yield this.http.post(`${this.baseUrl}/notifications/subscriptions`,e,{headers:{Authorization:`Bearer ${this.getAuthToken()}`}}).toPromise()})}removePushSubscription(e){return b(this,null,function*(){yield this.http.delete(`${this.baseUrl}/notifications/subscriptions/${e}`,{headers:{Authorization:`Bearer ${this.getAuthToken()}`}}).toPromise()})}setupNotificationHandlers(){this.isSupported&&(this.swPush.messages.subscribe(e=>{this.handleIncomingNotification(e)}),this.swPush.notificationClicks.subscribe(e=>{this.handleNotificationClick(e)}))}handleIncomingNotification(e){let t={id:Date.now().toString(),user_id:this.getCurrentUserId(),title:e.title,body:e.body,type:e.type,sent_at:new Date().toISOString(),delivered:!0,clicked:!1,data:e.data};this.addNotificationToHistory(t),document.hidden?this.showNotification(e):this.showInAppNotification(e)}handleNotificationClick(e){let t=e.notification.data;switch(this.markNotificationAsClicked(t.notification_id),t.type){case"payment_due":case"gnv_overage":t.payment_link&&window.open(t.payment_link,"_blank");break;case"document_pending":t.client_id&&(window.location.href=`/clientes/${t.client_id}#documentos`);break;case"contract_approved":t.client_id&&(window.location.href=`/clientes/${t.client_id}`);break;default:t.action_url&&(window.location.href=t.action_url)}e.notification.close()}showNotification(e){if(!this.isSupported||Notification.permission!=="granted")return;let t=B({body:e.body,icon:e.icon||"/assets/icons/icon-192x192.png",badge:e.badge||"/assets/icons/icon-72x72.png",tag:e.tag||e.type,data:e.data,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1},e.actions&&{actions:e.actions});new Notification(e.title,t)}showInAppNotification(e){console.log("In-app notification:",e)}loadStoredNotifications(){let e=localStorage.getItem("notification_history");if(e)try{let t=JSON.parse(e);this.notifications$.next(t)}catch{localStorage.removeItem("notification_history")}}addNotificationToHistory(e){let t=this.notifications$.value,n=[e,...t].slice(0,50);this.notifications$.next(n),localStorage.setItem("notification_history",JSON.stringify(n))}markNotificationAsClicked(e){let n=this.notifications$.value.map(a=>a.id===e?ae(B({},a),{clicked:!0}):a);this.notifications$.next(n),localStorage.setItem("notification_history",JSON.stringify(n))}getUnreadCount(){return new ve(e=>{this.notifications$.subscribe(t=>{let n=t.filter(a=>!a.clicked).length;e.next(n)})})}markAllAsRead(){let t=this.notifications$.value.map(n=>ae(B({},n),{clicked:!0}));this.notifications$.next(t),localStorage.setItem("notification_history",JSON.stringify(t))}clearNotificationHistory(){this.notifications$.next([]),localStorage.removeItem("notification_history")}sendTestNotification(){return b(this,null,function*(){let e={type:"general",title:"Prueba de Notificaci\xF3n",body:"Esta es una notificaci\xF3n de prueba del sistema Conductores PWA",icon:"/assets/icons/icon-192x192.png",data:{test:!0,timestamp:Date.now()},actions:[{action:"view",title:"Ver Detalles"},{action:"dismiss",title:"Cerrar"}]};try{yield this.http.post(`${this.baseUrl}/notifications/send-test`,{user_id:this.getCurrentUserId(),payload:e},{headers:{Authorization:`Bearer ${this.getAuthToken()}`}}).toPromise(),console.log("Test notification sent successfully")}catch(t){console.error("Failed to send test notification:",t),this.showNotification(e)}})}getCurrentUserId(){let e=localStorage.getItem("currentUser");return e?JSON.parse(e).id:"anonymous"}getAuthToken(){return localStorage.getItem("auth_token")||""}getDeviceInfo(){let e=navigator.userAgent,t=/Mobile|Android|iPhone|iPad/.test(e);return{browser:this.getBrowserName(),os:this.getOSName(),device_type:t?"mobile":"desktop"}}getBrowserName(){let e=navigator.userAgent;return e.includes("Chrome")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")?"Safari":e.includes("Edge")?"Edge":"Unknown"}getOSName(){let e=navigator.userAgent;return e.includes("Windows")?"Windows":e.includes("Mac")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")?"iOS":"Unknown"}initializeNotifications(){return b(this,null,function*(){if(!this.isSupported)return console.warn("Push notifications not supported"),!1;try{if(Notification.permission==="granted")return yield this.subscribeToNotifications(),this.setupNotificationHandlers(),!0;if(Notification.permission==="default"&&(yield this.requestPermission())==="granted")return this.setupNotificationHandlers(),!0}catch(e){console.error("Failed to initialize notifications:",e)}return!1})}arrayBufferToBase64(e){let t=new Uint8Array(e),n="";return t.forEach(a=>n+=String.fromCharCode(a)),btoa(n)}getNotificationStatus(){return{supported:this.isSupported,permission:Notification.permission,subscribed:this.subscription$.value!==null,subscription_id:this.subscription$.value?.subscription_id}}static{this.\u0275fac=function(t){return new(t||i)(w(fe),w($e))}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function vt(i,s){if(i&1&&(r(0,"span",15),l(1),o()),i&2){let e=s.ngIf;c(),v(e)}}function bt(i,s){if(i&1){let e=_();r(0,"button",16),f("click",function(){g(e);let n=m();return h(n.markAllAsRead())}),l(1," Marcar todas "),o()}}function _t(i,s){if(i&1){let e=_();r(0,"div",17)(1,"div",18)(2,"span",19),l(3,"\u{1F514}"),o(),r(4,"div",20)(5,"div",21),l(6,"Activar Notificaciones"),o(),r(7,"div",22),l(8,"Recibe alertas de pagos y actualizaciones importantes"),o()(),r(9,"div",23)(10,"button",24),f("click",function(){g(e);let n=m();return h(n.requestPermission())}),l(11,"Activar"),o(),r(12,"button",25),f("click",function(){g(e);let n=m();return h(n.dismissPermissionBanner())}),l(13,"Despu\xE9s"),o()()()()}}function xt(i,s){if(i&1){let e=_();r(0,"div",26)(1,"div",27)(2,"span",28),l(3,"\u2705"),o(),r(4,"span",29),l(5,"Notificaciones activadas"),o(),r(6,"button",30),f("click",function(){g(e);let n=m();return h(n.sendTestNotification())}),l(7,"Prueba"),o()()()}}function Ct(i,s){i&1&&(r(0,"div",31)(1,"span",32),l(2,"\u{1F4ED}"),o(),r(3,"div",33),l(4,"No hay notificaciones"),o(),r(5,"div",34),l(6,"Las notificaciones aparecer\xE1n aqu\xED"),o()())}function wt(i,s){if(i&1){let e=_();r(0,"button",46),f("click",function(n){g(e);let a=m().$implicit;return m().executeAction(a),h(n.stopPropagation())}),l(1),o()}if(i&2){let e=m().$implicit,t=m();c(),H(" ",t.getActionLabel(e)," ")}}function yt(i,s){i&1&&P(0,"div",47)}function kt(i,s){if(i&1){let e=_();r(0,"div",35),f("click",function(){let n=g(e).$implicit,a=m();return h(a.handleNotificationClick(n))}),r(1,"div",36),l(2),o(),r(3,"div",37)(4,"div",38),l(5),o(),r(6,"div",39),l(7),o(),r(8,"div",40)(9,"span",41),l(10),o(),r(11,"span",42),l(12),o()()(),r(13,"div",43),u(14,wt,2,1,"button",44)(15,yt,1,0,"div",45),o()()}if(i&2){let e=s.$implicit,t=m();y("unread",!e.clicked),c(),Ee("aria-label",t.getTypeLabel(e.type)),c(),H(" ",t.getNotificationIcon(e.type)," "),c(3),v(e.title),c(2),v(e.body),c(3),v(t.formatTime(e.sent_at)),c(2),v(t.getTypeLabel(e.type)),c(2),p("ngIf",t.hasAction(e)),c(),p("ngIf",!e.clicked)}}function Pt(i,s){if(i&1){let e=_();r(0,"div",48)(1,"button",49),f("click",function(){g(e);let n=m();return h(n.clearAll())}),l(2," Limpiar historial "),o()()}}function Mt(i,s){if(i&1){let e=_();r(0,"div",50),f("click",function(){g(e);let n=m();return h(n.close())}),o()}}var ot=(()=>{class i{constructor(e){this.notificationService=e,this.isOpen=!1,this.permissionGranted=!1,this.showPermissionBanner=!0,this.destroy$=new Z,this.notifications$=this.notificationService.notificationHistory,this.unreadCount$=this.notificationService.getUnreadCount()}ngOnInit(){this.notificationService.permission.pipe(we(this.destroy$)).subscribe(e=>{this.permissionGranted=e==="granted",this.permissionGranted&&(this.showPermissionBanner=!1)}),this.notificationService.pushSupported&&this.notificationService.initializeNotifications()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}open(){this.isOpen=!0}close(){this.isOpen=!1}toggle(){this.isOpen=!this.isOpen}requestPermission(){return b(this,null,function*(){try{(yield this.notificationService.requestPermission())==="granted"&&(this.showPermissionBanner=!1)}catch(e){console.error("Failed to request notification permission:",e)}})}dismissPermissionBanner(){this.showPermissionBanner=!1,localStorage.setItem("notification_permission_dismissed","true")}sendTestNotification(){return b(this,null,function*(){try{yield this.notificationService.sendTestNotification()}catch(e){console.error("Failed to send test notification:",e)}})}markAllAsRead(){this.notificationService.markAllAsRead()}clearAll(){confirm("\xBFEst\xE1s seguro de que quieres limpiar todo el historial de notificaciones?")&&this.notificationService.clearNotificationHistory()}handleNotificationClick(e){e.clicked,e.data&&this.executeAction(e)}executeAction(e){let t=e.data;switch(e.type){case"payment_due":case"gnv_overage":t?.payment_link&&window.open(t.payment_link,"_blank");break;case"document_pending":t?.client_id&&(window.location.href=`/clientes/${t.client_id}#documentos`);break;case"contract_approved":t?.client_id&&(window.location.href=`/clientes/${t.client_id}`);break;default:t?.action_url&&(window.location.href=t.action_url)}}hasAction(e){let t=e.data;return!!(t?.payment_link||t?.action_url||t?.client_id)}getActionLabel(e){switch(e.type){case"payment_due":case"gnv_overage":return"Pagar";case"document_pending":return"Ver docs";case"contract_approved":return"Ver contrato";default:return"Ver"}}getNotificationIcon(e){switch(e){case"payment_due":case"gnv_overage":return"\u{1F4B0}";case"document_pending":return"\u{1F4CB}";case"contract_approved":return"\u2705";case"general":return"\u2139\uFE0F";default:return"\u{1F514}"}}getTypeLabel(e){switch(e){case"payment_due":return"Pago";case"gnv_overage":return"GNV";case"document_pending":return"Docs";case"contract_approved":return"Contrato";case"general":return"General";default:return e.toUpperCase()}}formatTime(e){let t=new Date,n=new Date(e),a=t.getTime()-n.getTime(),d=Math.floor(a/6e4),F=Math.floor(a/36e5),re=Math.floor(a/864e5);return d<1?"Ahora":d<60?`${d}m`:F<24?`${F}h`:re<7?`${re}d`:n.toLocaleDateString("es-MX",{month:"short",day:"numeric"})}trackByNotificationId(e,t){return t.id}static{this.\u0275fac=function(t){return new(t||i)(T(oe))}}static{this.\u0275cmp=V({type:i,selectors:[["app-notification-center"]],standalone:!0,features:[z],decls:23,vars:23,consts:[[1,"notification-center"],[1,"notification-header"],[1,"header-title"],[1,"title"],["class","count",4,"ngIf"],[1,"header-actions"],["class","btn-mark-all",3,"click",4,"ngIf"],[1,"btn-close",3,"click"],["class","permission-banner",4,"ngIf"],["class","notification-status",4,"ngIf"],[1,"notifications-list"],["class","empty-state",4,"ngIf"],["class","notification-item",3,"unread","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","notification-footer",4,"ngIf"],["class","notification-overlay",3,"click",4,"ngIf"],[1,"count"],[1,"btn-mark-all",3,"click"],[1,"permission-banner"],[1,"banner-content"],[1,"banner-icon"],[1,"banner-text"],[1,"banner-title"],[1,"banner-description"],[1,"banner-actions"],[1,"btn-enable",3,"click"],[1,"btn-dismiss",3,"click"],[1,"notification-status"],[1,"status-item"],[1,"status-icon"],[1,"status-text"],[1,"btn-test",3,"click"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-title"],[1,"notification-body"],[1,"notification-meta"],[1,"notification-time"],[1,"notification-type"],[1,"notification-actions"],["class","btn-action primary",3,"click",4,"ngIf"],["class","unread-indicator",4,"ngIf"],[1,"btn-action","primary",3,"click"],[1,"unread-indicator"],[1,"notification-footer"],[1,"btn-clear",3,"click"],[1,"notification-overlay",3,"click"]],template:function(t,n){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l(4,"\u{1F514} Notificaciones"),o(),u(5,vt,2,1,"span",4),M(6,"async"),o(),r(7,"div",5),u(8,bt,2,0,"button",6),M(9,"async"),M(10,"async"),r(11,"button",7),f("click",function(){return n.close()}),l(12,"\u2715"),o()()(),u(13,_t,14,0,"div",8)(14,xt,8,0,"div",9),r(15,"div",10),u(16,Ct,7,0,"div",11),M(17,"async"),u(18,kt,16,10,"div",12),M(19,"async"),o(),u(20,Pt,3,0,"div",13),M(21,"async"),o(),u(22,Mt,1,0,"div",14)),t&2){let a,d;y("open",n.isOpen),c(5),p("ngIf",S(6,11,n.unreadCount$)),c(3),p("ngIf",S(9,13,n.unreadCount$)&&S(10,15,n.unreadCount$)>0),c(5),p("ngIf",!n.permissionGranted&&n.showPermissionBanner),c(),p("ngIf",n.permissionGranted),c(2),p("ngIf",((a=S(17,17,n.notifications$))==null?null:a.length)===0),c(2),p("ngForOf",S(19,19,n.notifications$))("ngForTrackBy",n.trackByNotificationId),c(2),p("ngIf",((d=S(21,21,n.notifications$))==null?null:d.length)>0),c(2),p("ngIf",n.isOpen)}},dependencies:[G,L,q,X],styles:[".notification-center[_ngcontent-%COMP%]{position:fixed;top:0;right:-400px;width:380px;height:100vh;background:#fff;box-shadow:-4px 0 20px #00000026;z-index:1000;transition:right .3s ease;display:flex;flex-direction:column}.notification-center.open[_ngcontent-%COMP%]{right:0}.notification-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0000004d;z-index:999}.notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e5e7eb;background:#f9fafb}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1f2937}.count[_ngcontent-%COMP%]{background:#ef4444;color:#fff;font-size:.75rem;padding:2px 6px;border-radius:10px;font-weight:600;min-width:18px;text-align:center}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-mark-all[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:.85rem;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s}.btn-mark-all[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;color:#6b7280;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color .2s}.btn-close[_ngcontent-%COMP%]:hover{background:#e5e7eb}.permission-banner[_ngcontent-%COMP%]{padding:16px 20px;background:linear-gradient(135deg,#06d6a0,#059669);color:#fff}.banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.banner-icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.banner-text[_ngcontent-%COMP%]{flex:1}.banner-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:2px}.banner-description[_ngcontent-%COMP%]{font-size:.85rem;opacity:.9}.banner-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-enable[_ngcontent-%COMP%], .btn-dismiss[_ngcontent-%COMP%]{background:#fff3;border:1px solid rgba(255,255,255,.3);color:#fff;padding:6px 12px;border-radius:6px;font-size:.85rem;cursor:pointer;transition:background-color .2s}.btn-enable[_ngcontent-%COMP%]{background:#ffffff40;font-weight:600}.btn-enable[_ngcontent-%COMP%]:hover{background:#ffffff59}.btn-dismiss[_ngcontent-%COMP%]:hover{background:#ffffff26}.notification-status[_ngcontent-%COMP%]{padding:12px 20px;background:#f0fdf4;border-bottom:1px solid #e5e7eb}.status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.status-icon[_ngcontent-%COMP%]{font-size:1rem}.status-text[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#16a34a;font-weight:500}.btn-test[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;padding:4px 8px;border-radius:4px;font-size:.8rem;color:#6b7280;cursor:pointer;transition:all .2s}.btn-test[_ngcontent-%COMP%]:hover{background:#f3f4f6;border-color:#9ca3af}.notifications-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:16px;opacity:.6}.empty-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1f2937;margin-bottom:8px}.empty-description[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280}.notification-item[_ngcontent-%COMP%]{display:flex;padding:16px 20px;border-bottom:1px solid #f3f4f6;cursor:pointer;transition:background-color .2s;position:relative}.notification-item[_ngcontent-%COMP%]:hover{background:#f9fafb}.notification-item.unread[_ngcontent-%COMP%]{background:#f0f9ff;border-left:3px solid #0ea5e9}.notification-icon[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px;background:#f3f4f6;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem;margin-right:12px}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-title[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;margin-bottom:4px;font-size:.95rem;line-height:1.3}.notification-body[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;line-height:1.4;margin-bottom:8px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.notification-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:.8rem;color:#9ca3af}.notification-time[_ngcontent-%COMP%]{font-weight:500}.notification-type[_ngcontent-%COMP%]{background:#e5e7eb;padding:2px 6px;border-radius:4px;font-size:.75rem;text-transform:uppercase;font-weight:600}.notification-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px;margin-left:12px}.btn-action[_ngcontent-%COMP%]{background:#06d6a0;border:none;color:#fff;padding:6px 12px;border-radius:6px;font-size:.8rem;font-weight:600;cursor:pointer;transition:background-color .2s;white-space:nowrap}.btn-action[_ngcontent-%COMP%]:hover{background:#059669}.unread-indicator[_ngcontent-%COMP%]{width:8px;height:8px;background:#0ea5e9;border-radius:50%}.notification-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #e5e7eb;background:#f9fafb;text-align:center}.btn-clear[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;font-size:.9rem;cursor:pointer;padding:8px 16px;border-radius:6px;transition:all .2s}.btn-clear[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}@media (max-width: 768px){.notification-center[_ngcontent-%COMP%]{width:100vw;right:-100vw}.notification-center.open[_ngcontent-%COMP%]{right:0}}"]})}}return i})();var St=["notificationCenter"];function Et(i,s){i&1&&(r(0,"span",25),l(1,"Conductores PWA"),o())}function Ot(i,s){if(i&1&&(r(0,"span",26),l(1),o()),i&2){let e=s.ngIf;c(),H(" ",e>99?"99+":e," ")}}function It(i,s){if(i&1&&(r(0,"div",27)(1,"div",28)(2,"span"),l(3),o()(),r(4,"div",29)(5,"div",30),l(6),o(),r(7,"div",31),l(8),o()()()),i&2){let e=m();c(3),v(e.userInitials),c(3),v(e.userName),c(2),v(e.userRole)}}function Nt(i,s){i&1&&(r(0,"span",32),l(1,"Nueva Oportunidad"),o())}function Tt(i,s){if(i&1&&(r(0,"span",35),l(1),o()),i&2){let e=m().$implicit;c(),v(e.label)}}function At(i,s){if(i&1&&(r(0,"span",36),l(1),o()),i&2){let e=m().$implicit;c(),v(e.badge)}}function Dt(i,s){if(i&1&&(r(0,"span",36),l(1),o()),i&2){let e=m().$implicit;c(),v(e.badge)}}function $t(i,s){if(i&1){let e=_();r(0,"div",39),f("click",function(n){let a=g(e).$implicit;return m(3).navigate(a),h(n.stopPropagation())}),r(1,"span",40),l(2),o(),r(3,"span",41),l(4),o(),u(5,Dt,2,1,"span",33),o()}if(i&2){let e=s.$implicit,t=m(3);y("active",t.isActive(e.route)),c(2),v(e.icon),c(2),v(e.label),c(),p("ngIf",e.badge)}}function Vt(i,s){if(i&1&&(r(0,"div",37),u(1,$t,6,5,"div",38),o()),i&2){let e=m().$implicit;c(),p("ngForOf",e.children)}}function zt(i,s){if(i&1){let e=_();r(0,"div",18),f("click",function(){let n=g(e).$implicit,a=m();return h(a.navigate(n))}),r(1,"div",19)(2,"span",20),l(3),o(),u(4,Tt,2,1,"span",21)(5,At,2,1,"span",33),o(),u(6,Vt,2,1,"div",34),o()}if(i&2){let e=s.$implicit,t=m();y("active",t.isActive(e.route)),c(3),v(e.icon),c(),p("ngIf",!t.isCollapsed),c(),p("ngIf",e.badge&&!t.isCollapsed),c(),p("ngIf",e.children&&!t.isCollapsed&&t.isActive(e.route))}}function Rt(i,s){i&1&&(r(0,"span",35),l(1,"Ayuda"),o())}function Ft(i,s){i&1&&(r(0,"span",35),l(1,"Configuraci\xF3n"),o())}function jt(i,s){i&1&&(r(0,"span",35),l(1,"Salir"),o())}function Bt(i,s){if(i&1){let e=_();r(0,"div",42),f("click",function(){g(e);let n=m();return h(n.closeMobileMenu())}),o()}}function Wt(i,s){if(i&1){let e=_();r(0,"button",43),f("click",function(){g(e);let n=m();return h(n.toggleMobileMenu())}),l(1," \u2630 "),o()}}var rt=(()=>{class i{constructor(e,t){this.router=e,this.notificationService=t,this.isCollapsed=!1,this.showMobileMenu=!1,this.isMobileView=!1,this.userName="Asesor Demo",this.userRole="Asesor Financiero",this.userInitials="AD",this.navigationItems=[{label:"Dashboard",route:"/dashboard",icon:"\u{1F3E0}"},{label:"Nueva Oportunidad",route:"/nueva-oportunidad",icon:"\u2795",badge:2},{label:"Cotizador",route:"/cotizador",icon:"\u{1F4B0}",children:[{label:"AGS Individual",route:"/cotizador/ags-individual",icon:"\u{1F690}"},{label:"EdoMex Colectivo",route:"/cotizador/edomex-colectivo",icon:"\u{1F91D}"}]},{label:"Simulador",route:"/simulador",icon:"\u{1F3AF}",children:[{label:"Ahorro AGS",route:"/simulador/ags-ahorro",icon:"\u{1F4A1}"},{label:"Enganche EdoMex",route:"/simulador/edomex-individual",icon:"\u{1F3E6}"},{label:"Tanda Colectiva",route:"/simulador/tanda-colectiva",icon:"\u{1F328}\uFE0F"}]},{label:"Clientes",route:"/clientes",icon:"\u{1F465}",badge:12},{label:"Expedientes",route:"/expedientes",icon:"\u{1F4CB}"},{label:"Protecci\xF3n",route:"/proteccion",icon:"\u{1F6E1}\uFE0F",badge:3},{label:"Reportes",route:"/reportes",icon:"\u{1F4CA}"}],this.unreadCount$=this.notificationService.getUnreadCount()}ngOnInit(){this.checkMobileView(),window.addEventListener("resize",()=>this.checkMobileView()),this.initializeNotifications()}initializeNotifications(){return b(this,null,function*(){try{yield this.notificationService.initializeNotifications()}catch(e){console.error("Failed to initialize notifications:",e)}})}checkMobileView(){this.isMobileView=window.innerWidth<=768,this.isMobileView||(this.showMobileMenu=!1)}toggleCollapse(){this.isCollapsed=!this.isCollapsed}toggleMobileMenu(){this.showMobileMenu=!this.showMobileMenu}closeMobileMenu(){this.showMobileMenu=!1}toggleNotifications(){this.notificationCenter.toggle()}createNewOpportunity(){this.router.navigate(["/onboarding"]),this.isMobileView&&this.closeMobileMenu()}navigate(e){e.children||(this.router.navigate([e.route]),this.isMobileView&&this.closeMobileMenu())}isActive(e){return this.router.url===e||this.router.url.startsWith(e+"/")}showHelp(){console.log("Show help...")}showSettings(){console.log("Show settings...")}logout(){localStorage.removeItem("isAuthenticated"),localStorage.removeItem("rememberMe"),this.router.navigate(["/login"])}static{this.\u0275fac=function(t){return new(t||i)(T(R),T(oe))}}static{this.\u0275cmp=V({type:i,selectors:[["app-navigation"]],viewQuery:function(t,n){if(t&1&&Oe(St,5),t&2){let a;Ie(a=Ne())&&(n.notificationCenter=a.first)}},standalone:!0,features:[z],decls:42,vars:23,consts:[["notificationCenter",""],[1,"navigation"],[1,"nav-header"],[1,"logo"],[1,"logo-icon"],["class","logo-text",4,"ngIf"],[1,"header-actions"],[1,"notification-btn",3,"click"],["class","notification-badge",4,"ngIf"],[1,"toggle-btn",3,"click"],["class","user-section",4,"ngIf"],[1,"cta-section"],[1,"btn-nueva-oportunidad",3,"click"],[1,"btn-icon"],["class","btn-text",4,"ngIf"],[1,"nav-menu"],["class","nav-item",3,"active","click",4,"ngFor","ngForOf"],[1,"nav-bottom"],[1,"nav-item",3,"click"],[1,"nav-link"],[1,"nav-icon"],["class","nav-label",4,"ngIf"],[1,"nav-item","logout",3,"click"],["class","mobile-overlay",3,"click",4,"ngIf"],["class","mobile-menu-btn",3,"click",4,"ngIf"],[1,"logo-text"],[1,"notification-badge"],[1,"user-section"],[1,"user-avatar"],[1,"user-info"],[1,"user-name"],[1,"user-role"],[1,"btn-text"],["class","nav-badge",4,"ngIf"],["class","nav-submenu",4,"ngIf"],[1,"nav-label"],[1,"nav-badge"],[1,"nav-submenu"],["class","nav-subitem",3,"active","click",4,"ngFor","ngForOf"],[1,"nav-subitem",3,"click"],[1,"nav-subicon"],[1,"nav-sublabel"],[1,"mobile-overlay",3,"click"],[1,"mobile-menu-btn",3,"click"]],template:function(t,n){if(t&1){let a=_();r(0,"nav",1)(1,"div",2)(2,"div",3)(3,"span",4),l(4,"\u{1F690}"),o(),u(5,Et,2,0,"span",5),o(),r(6,"div",6)(7,"button",7),M(8,"async"),f("click",function(){return g(a),h(n.toggleNotifications())}),l(9," \u{1F514} "),u(10,Ot,2,1,"span",8),M(11,"async"),o(),r(12,"button",9),f("click",function(){return g(a),h(n.toggleCollapse())}),l(13),o()()(),u(14,It,9,3,"div",10),r(15,"div",11)(16,"button",12),f("click",function(){return g(a),h(n.createNewOpportunity())}),r(17,"span",13),l(18,"\u2795"),o(),u(19,Nt,2,0,"span",14),o()(),r(20,"div",15),u(21,zt,7,6,"div",16),o(),r(22,"div",17)(23,"div",18),f("click",function(){return g(a),h(n.showHelp())}),r(24,"div",19)(25,"span",20),l(26,"\u2753"),o(),u(27,Rt,2,0,"span",21),o()(),r(28,"div",18),f("click",function(){return g(a),h(n.showSettings())}),r(29,"div",19)(30,"span",20),l(31,"\u2699\uFE0F"),o(),u(32,Ft,2,0,"span",21),o()(),r(33,"div",22),f("click",function(){return g(a),h(n.logout())}),r(34,"div",19)(35,"span",20),l(36,"\u{1F6AA}"),o(),u(37,jt,2,0,"span",21),o()()(),u(38,Bt,1,0,"div",23),o(),u(39,Wt,2,0,"button",24),P(40,"app-notification-center",null,0)}t&2&&(y("collapsed",n.isCollapsed),c(2),y("collapsed",n.isCollapsed),c(3),p("ngIf",!n.isCollapsed),c(2),y("has-notifications",S(8,19,n.unreadCount$)>0),c(3),p("ngIf",S(11,21,n.unreadCount$)),c(3),H(" ",n.isCollapsed?"\u27A1\uFE0F":"\u2B05\uFE0F"," "),c(),p("ngIf",!n.isCollapsed),c(2),y("collapsed",n.isCollapsed),c(3),p("ngIf",!n.isCollapsed),c(2),p("ngForOf",n.navigationItems),c(6),p("ngIf",!n.isCollapsed),c(5),p("ngIf",!n.isCollapsed),c(5),p("ngIf",!n.isCollapsed),c(),p("ngIf",n.showMobileMenu),c(),p("ngIf",n.isMobileView))},dependencies:[G,L,q,X,te,ot],styles:[".navigation[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:280px;background:linear-gradient(180deg,#2d3748,#1a202c);color:#fff;transition:width .3s ease;z-index:1000;display:flex;flex-direction:column;box-shadow:4px 0 12px #00000026}.navigation.collapsed[_ngcontent-%COMP%]{width:70px}.nav-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.notification-btn[_ngcontent-%COMP%]{position:relative;background:#ffffff1a;border:none;color:#fff;padding:8px;border-radius:6px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:all .2s;width:36px;height:36px}.notification-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.05)}.notification-btn.has-notifications[_ngcontent-%COMP%]{background:#ef444433;border:1px solid rgba(239,68,68,.3);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef444466}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background:#ef4444;color:#fff;font-size:.7rem;padding:2px 5px;border-radius:10px;font-weight:600;min-width:16px;text-align:center;line-height:1;border:2px solid #2d3748}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;transition:all .3s ease}.logo.collapsed[_ngcontent-%COMP%]{justify-content:center}.logo-icon[_ngcontent-%COMP%]{font-size:1.8rem;flex-shrink:0}.logo-text[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#e2e8f0}.toggle-btn[_ngcontent-%COMP%]{background:#ffffff1a;border:none;color:#fff;padding:8px;border-radius:6px;cursor:pointer;font-size:1rem;transition:background-color .2s}.toggle-btn[_ngcontent-%COMP%]:hover{background:#fff3}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:20px 16px;border-bottom:1px solid rgba(255,255,255,.1)}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(135deg,#4299e1,#3182ce);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;flex-shrink:0}.user-info[_ngcontent-%COMP%]{flex:1}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:#e2e8f0}.user-role[_ngcontent-%COMP%]{font-size:.8rem;color:#a0aec0;margin-top:2px}.cta-section[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid rgba(255,255,255,.1)}.btn-nueva-oportunidad[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#06d6a0,#059669);border:none;color:#fff;padding:16px;border-radius:12px;font-weight:700;font-size:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .3s ease;box-shadow:0 4px 12px #06d6a04d}.btn-nueva-oportunidad[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #06d6a066;background:linear-gradient(135deg,#059669,#047857)}.btn-nueva-oportunidad.collapsed[_ngcontent-%COMP%]{width:48px;height:48px;padding:0;border-radius:50%}.btn-icon[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:900}.btn-text[_ngcontent-%COMP%]{white-space:nowrap}.nav-menu[_ngcontent-%COMP%]{flex:1;padding:16px 0;overflow-y:auto}.nav-item[_ngcontent-%COMP%]{margin-bottom:4px;cursor:pointer;transition:all .2s}.nav-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.nav-item.active[_ngcontent-%COMP%]{background:#4299e133;border-right:3px solid #4299e1}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;text-decoration:none;color:inherit}.nav-icon[_ngcontent-%COMP%]{font-size:1.3rem;flex-shrink:0;width:24px;text-align:center}.nav-label[_ngcontent-%COMP%]{flex:1;font-size:.95rem;font-weight:500}.nav-badge[_ngcontent-%COMP%]{background:#e53e3e;color:#fff;font-size:.75rem;padding:2px 8px;border-radius:12px;font-weight:600;min-width:20px;text-align:center}.nav-submenu[_ngcontent-%COMP%]{background:#0003;margin-top:4px;border-radius:0 0 8px 8px}.nav-subitem[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 16px 8px 52px;font-size:.9rem;cursor:pointer;transition:background-color .2s}.nav-subitem[_ngcontent-%COMP%]:hover{background:#ffffff0d}.nav-subitem.active[_ngcontent-%COMP%]{background:#4299e14d}.nav-subicon[_ngcontent-%COMP%]{font-size:1rem;width:16px;text-align:center}.nav-sublabel[_ngcontent-%COMP%]{flex:1}.nav-bottom[_ngcontent-%COMP%]{padding:16px 0;border-top:1px solid rgba(255,255,255,.1)}.nav-item.logout[_ngcontent-%COMP%]:hover{background:#e53e3e33}.mobile-menu-btn[_ngcontent-%COMP%]{display:none;position:fixed;top:20px;left:20px;z-index:1001;background:#2d3748;color:#fff;border:none;padding:12px;border-radius:8px;font-size:1.2rem;cursor:pointer;box-shadow:0 4px 12px #0003}.mobile-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;z-index:999;display:none}@media (max-width: 768px){.navigation[_ngcontent-%COMP%]{transform:translate(-100%);transition:transform .3s ease}.navigation.mobile-open[_ngcontent-%COMP%]{transform:translate(0)}.mobile-menu-btn[_ngcontent-%COMP%], .mobile-overlay[_ngcontent-%COMP%]{display:block}}"]})}}return i})();function Ut(i,s){if(i&1&&(r(0,"span",9),l(1),o()),i&2){let e=m().$implicit;c(),v(e.badge>99?"99+":e.badge)}}function Ht(i,s){i&1&&P(0,"div",10)}function Lt(i,s){if(i&1){let e=_();r(0,"div",3),f("click",function(){let n=g(e).$implicit,a=m(2);return h(a.navigateTo(n.route))}),r(1,"div",4)(2,"span",5),l(3),o(),u(4,Ut,2,1,"span",6),o(),r(5,"span",7),l(6),o(),u(7,Ht,1,0,"div",8),o()}if(i&2){let e=s.$implicit;y("active",e.isActive),c(3),v(e.isActive&&e.activeIcon||e.icon),c(),p("ngIf",e.badge&&e.badge>0),c(2),v(e.label),c(),p("ngIf",e.isActive)}}function qt(i,s){if(i&1&&(r(0,"nav",1),u(1,Lt,8,6,"div",2),o()),i&2){let e=m();c(),p("ngForOf",e.navItems)("ngForTrackBy",e.trackByRoute)}}var at=(()=>{class i{constructor(e){this.router=e,this.showBottomNav=!1,this.navItems=[{label:"Dashboard",route:"/dashboard",icon:"\u{1F3E0}",activeIcon:"\u{1F3E0}"},{label:"Oportunidades",route:"/oportunidades",icon:"\u{1F3AF}",activeIcon:"\u{1F3AF}",badge:5},{label:"Cotizar",route:"/cotizador",icon:"\u{1F4B0}",activeIcon:"\u{1F4B0}"},{label:"Clientes",route:"/clientes",icon:"\u{1F465}",activeIcon:"\u{1F465}",badge:12},{label:"M\xE1s",route:"/menu",icon:"\u26A1",activeIcon:"\u26A1",badge:2}]}ngOnInit(){this.checkMobileView(),this.updateActiveStates(),this.router.events.pipe(k(e=>e instanceof Fe)).subscribe(()=>{this.updateActiveStates()}),window.addEventListener("resize",()=>this.checkMobileView())}checkMobileView(){this.showBottomNav=window.innerWidth<=768}updateActiveStates(){let e=this.router.url;this.navItems.forEach(t=>{if(t.route==="/menu"){let n=["/dashboard","/oportunidades","/cotizador","/clientes"];t.isActive=!n.some(a=>e===a||e.startsWith(a+"/"))}else t.isActive=e===t.route||e.startsWith(t.route+"/")})}navigateTo(e){e==="/menu"?this.showMoreMenu():this.router.navigate([e]),"vibrate"in navigator&&navigator.vibrate(50)}showMoreMenu(){console.log("Show more menu")}trackByRoute(e,t){return t.route}static{this.\u0275fac=function(t){return new(t||i)(T(R))}}static{this.\u0275cmp=V({type:i,selectors:[["app-bottom-nav-bar"]],standalone:!0,features:[z],decls:1,vars:1,consts:[["class","bottom-nav-bar",4,"ngIf"],[1,"bottom-nav-bar"],["class","nav-item",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nav-item",3,"click"],[1,"nav-icon-container"],[1,"nav-icon"],["class","nav-badge",4,"ngIf"],[1,"nav-label"],["class","active-indicator",4,"ngIf"],[1,"nav-badge"],[1,"active-indicator"]],template:function(t,n){t&1&&u(0,qt,2,2,"nav",0),t&2&&p("ngIf",n.showBottomNav)},dependencies:[G,L,q,te],styles:[".bottom-nav-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:1000;display:flex;background:#2d3748f2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-top:1px solid rgba(255,255,255,.1);padding:8px 0 calc(8px + env(safe-area-inset-bottom));box-shadow:0 -4px 20px #0000001a}.nav-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px 4px;cursor:pointer;transition:all .2s ease;position:relative;min-height:60px;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.nav-item[_ngcontent-%COMP%]:active{transform:scale(.95);background:#ffffff0d;border-radius:12px}.nav-icon-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:32px;height:32px;margin-bottom:4px;transition:transform .2s ease}.nav-item.active[_ngcontent-%COMP%]   .nav-icon-container[_ngcontent-%COMP%]{transform:translateY(-2px)}.nav-icon[_ngcontent-%COMP%]{font-size:20px;line-height:1;color:#a0aec0;transition:all .3s ease}.nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:#06d6a0;filter:drop-shadow(0 0 8px rgba(6,214,160,.4));transform:scale(1.1)}.nav-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;min-width:16px;height:16px;background:linear-gradient(135deg,#e53e3e,#c53030);color:#fff;border-radius:8px;font-size:10px;font-weight:600;display:flex;align-items:center;justify-content:center;padding:0 4px;box-shadow:0 2px 4px #e53e3e4d;animation:_ngcontent-%COMP%_pulse-badge 2s infinite}@keyframes _ngcontent-%COMP%_pulse-badge{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.nav-label[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:#6b7280;text-align:center;line-height:1.2;transition:all .3s ease;max-width:60px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.nav-item.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{color:#06d6a0;font-weight:600}.active-indicator[_ngcontent-%COMP%]{position:absolute;top:-1px;left:50%;transform:translate(-50%);width:20px;height:3px;background:linear-gradient(90deg,#06d6a0,#04d9ff);border-radius:0 0 2px 2px;animation:_ngcontent-%COMP%_slide-in .3s ease}@keyframes _ngcontent-%COMP%_slide-in{0%{width:0;opacity:0}to{width:20px;opacity:1}}@media (min-width: 769px){.bottom-nav-bar[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{--bottom-nav-height: 76px}}@media (prefers-color-scheme: dark){.bottom-nav-bar[_ngcontent-%COMP%]{background:#111827f2;border-top:1px solid rgba(255,255,255,.1)}}.nav-item[_ngcontent-%COMP%]:focus{outline:2px solid #06d6a0;outline-offset:2px;border-radius:8px}.nav-item[_ngcontent-%COMP%]:focus-visible{background:#06d6a01a}@media (prefers-reduced-motion: reduce){.nav-item[_ngcontent-%COMP%], .nav-icon[_ngcontent-%COMP%], .nav-label[_ngcontent-%COMP%], .nav-icon-container[_ngcontent-%COMP%], .active-indicator[_ngcontent-%COMP%]{transition:none}.nav-badge[_ngcontent-%COMP%]{animation:none}}"]})}}return i})();var st=(()=>{class i{constructor(){this.hasRequestedPermissions=!1}requestCameraAndMicrophonePermissions(){return b(this,null,function*(){if(this.hasRequestedPermissions)return this.checkPermissions();try{return(yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(t=>t.stop()),this.hasRequestedPermissions=!0,{camera:!0,microphone:!0}}catch(e){console.warn("Media permissions denied or not available:",e);let t={camera:!1,microphone:!1};try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(a=>a.stop()),t.camera=!0}catch{}try{(yield navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(a=>a.stop()),t.microphone=!0}catch{}return this.hasRequestedPermissions=!0,t}})}checkPermissions(){return b(this,null,function*(){let e={camera:!1,microphone:!1};try{let t=yield navigator.permissions.query({name:"camera"});e.camera=t.state==="granted"}catch{}try{let t=yield navigator.permissions.query({name:"microphone"});e.microphone=t.state==="granted"}catch{}return e})}isSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ct=(()=>{class i{constructor(e){this.mediaPermissions=e,this.title="conductores-pwa"}ngOnInit(){return b(this,null,function*(){if(this.mediaPermissions.isSupported())try{let e=yield this.mediaPermissions.requestCameraAndMicrophonePermissions();console.log("Media permissions:",e)}catch(e){console.warn("Error requesting media permissions:",e)}})}static{this.\u0275fac=function(t){return new(t||i)(T(st))}}static{this.\u0275cmp=V({type:i,selectors:[["app-root"]],standalone:!0,features:[z],decls:7,vars:0,consts:[["href","#main-content",1,"skip-link"],[1,"app-layout"],["role","navigation","aria-label","Navegaci\xF3n principal"],["id","main-content","role","main",1,"main-content"],["role","navigation","aria-label","Navegaci\xF3n inferior"]],template:function(t,n){t&1&&(r(0,"a",0),l(1,"Saltar al contenido"),o(),r(2,"div",1),P(3,"app-navigation",2),r(4,"main",3),P(5,"router-outlet"),o(),P(6,"app-bottom-nav-bar",4),o())},dependencies:[je,rt,at],styles:[".app-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#f7fafc}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:280px;padding:24px;padding-bottom:calc(24px + env(safe-area-inset-bottom));transition:margin-left .3s ease}.main-content.nav-collapsed[_ngcontent-%COMP%]{margin-left:70px}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0;padding:16px;padding-bottom:calc(92px + env(safe-area-inset-bottom))}}@media (min-width: 769px) and (max-width: 1024px){.main-content[_ngcontent-%COMP%]{margin-left:280px;padding:20px}}@media (min-width: 1440px){.main-content[_ngcontent-%COMP%]{margin-left:300px;padding:32px;max-width:calc(100% - 300px)}}*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{display:block;width:100%;min-height:100vh;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}*[_ngcontent-%COMP%]:focus{outline:2px solid #4299e1;outline-offset:2px}*[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}[_ngcontent-%COMP%]::selection{background:#4299e14d;color:inherit}[_ngcontent-%COMP%]::-moz-selection{background:#4299e14d;color:inherit}.skip-link[_ngcontent-%COMP%]{position:absolute;top:-40px;left:16px;background:#111827;color:#fff;padding:8px 12px;border-radius:6px;transition:top .2s ease;z-index:1000}.skip-link[_ngcontent-%COMP%]:focus{top:12px;outline:3px solid var(--focus-ring-color)}"]})}}return i})();Re(ct,tt).then(()=>{!De()&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/ngsw-worker.js").then(i=>{console.log("Service Worker registered successfully",i)}).catch(i=>{console.log("Service Worker registration failed",i)})}).catch(i=>console.error(i));
