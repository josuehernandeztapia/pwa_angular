import{V as M}from"./chunk-5IDTUAMZ.js";var l=(()=>{class n{constructor(){this.TIR_MIN_AGS=.255,this.TIR_MIN_EDOMEX=.299,this.difMaxMeses=6,this.stepDownMaxPct=.5}getTIRMin(e){return e==="aguascalientes"?this.TIR_MIN_AGS:e==="edomex"?this.TIR_MIN_EDOMEX:this.TIR_MIN_AGS}calculateTIR(e,r=.1,t=1e-6,a=100){let i=r;for(let u=0;u<a;u++){let o=0,f=0;for(let s=0;s<e.length;s++){let c=Math.pow(1+i,s);o+=e[s]/c,f-=s*e[s]/Math.pow(1+i,s+1)}if(Math.abs(o)<t)return i;if(Math.abs(f)<t)break;i=i-o/f,i=Math.max(-.99,Math.min(i,10))}return i}generateCashFlows(e,r,t){let a=new Array(t+1).fill(0);a[0]=-e;for(let i=1;i<=t&&i-1<r.length;i++)a[i]=r[i-1]||0;return a}capitalizeInterest(e,r,t){return e*Math.pow(1+r,t)}validateScenarioPolicy(e,r,t){switch(e){case"defer":if(r>this.difMaxMeses)return{valid:!1,reason:`El diferimiento no puede exceder ${this.difMaxMeses} meses. Solicitado: ${r} meses.`};break;case"step-down":if(t&&t>this.stepDownMaxPct)return{valid:!1,reason:`La reducci\xF3n no puede exceder ${(this.stepDownMaxPct*100).toFixed(0)}%. Solicitado: ${(t*100).toFixed(0)}%.`};break}return{valid:!0}}annuity(e,r,t){return t<=0?e:r<=0?e/t:e*r/(1-Math.pow(1+r,-t))}getBalance(e,r,t,a){return t<=0?e-r*a:e*Math.pow(1+t,a)-r*(Math.pow(1+t,a)-1)/t}formatCurrency(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{l as a};
