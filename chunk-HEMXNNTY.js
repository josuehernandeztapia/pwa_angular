import{k as $,m as N}from"./chunk-SCHFUJ5K.js";import{Ea as s,Fa as P,Sa as u,Ua as m,Wa as w,Xa as S,Xb as I,Ya as a,Yb as F,Za as t,_a as k,ac as z,bb as h,bc as A,cb as b,db as l,ea as E,ib as r,jb as g,kb as C,lb as T,ma as x,na as _,sb as D,vb as y,yb as O}from"./chunk-5IDTUAMZ.js";import"./chunk-DM275RSA.js";function B(o,d){if(o&1){let e=h();a(0,"div",11),b("click",function(){let n=x(e).$implicit,c=l(2);return _(c.selectScenario(n))}),a(1,"div",12),r(2),t(),a(3,"div",13)(4,"h3"),r(5),t(),a(6,"p",14),r(7),t(),a(8,"p",15),r(9),t()(),a(10,"div",16),r(11,"\u2192"),t()()}if(o&2){let e=d.$implicit;S(e.gradient),s(2),g(e.icon),s(3),g(e.title),s(2),g(e.subtitle),s(2),g(e.description)}}function j(o,d){if(o&1&&(a(0,"span"),r(1),t()),o&2){let e=l(3);s(),C(" \u2022 ",e.smartContext.clientName,"")}}function Y(o,d){if(o&1&&(a(0,"div",17)(1,"div",18)(2,"span",19),r(3,"\u26A1"),t(),a(4,"div",20)(5,"strong"),r(6,"Contexto detectado:"),t(),r(7),u(8,j,2,1,"span",21),t()()()),o&2){let e=l(2);s(7),T(" ",e.smartContext.market," \u2022 ",e.smartContext.clientType," "),s(),m("ngIf",e.smartContext.clientName)}}function X(o,d){if(o&1){let e=h();a(0,"div",42)(1,"input",43),b("change",function(){x(e);let n=l().$implicit,c=l(3);return _(c.toggleSimulationSelection(n.id))}),t(),k(2,"label",44),t()}if(o&2){let e=l().$implicit,i=l(3);s(),m("id","compare-"+e.id)("checked",i.selectedForComparison.has(e.id))("disabled",!i.selectedForComparison.has(e.id)&&i.selectedForComparison.size>=3),s(),m("for","compare-"+e.id)}}function U(o,d){if(o&1){let e=h();a(0,"div",45)(1,"button",46),b("click",function(){x(e);let n=l().$implicit,c=l(3);return _(c.continueSimulation(n))}),r(2," \u{1F4C2} Continuar "),t(),a(3,"button",47),b("click",function(){x(e);let n=l().$implicit,c=l(3);return _(c.deleteSimulation(n.id))}),r(4," \u{1F5D1}\uFE0F "),t()()}}function H(o,d){if(o&1&&(a(0,"div",35)(1,"span",36),r(2,"Meta:"),t(),a(3,"span",37),r(4),y(5,"currency"),t()()),o&2){let e=l().$implicit;s(4),g(O(5,1,e.summary.targetAmount,"MXN","symbol","1.0-0"))}}function q(o,d){if(o&1&&(a(0,"div",35)(1,"span",36),r(2,"Mensual:"),t(),a(3,"span",37),r(4),y(5,"currency"),t()()),o&2){let e=l().$implicit;s(4),g(O(5,1,e.summary.monthlyContribution,"MXN","symbol","1.0-0"))}}function K(o,d){if(o&1&&(a(0,"div",28),u(1,X,3,4,"div",29),a(2,"div",30)(3,"div",31)(4,"h4"),r(5),t(),a(6,"span",32),r(7),t()(),u(8,U,5,0,"div",33),t(),a(9,"div",34)(10,"div",35)(11,"span",36),r(12,"Mercado:"),t(),a(13,"span",37),r(14),t()(),a(15,"div",35)(16,"span",36),r(17,"Tipo:"),t(),a(18,"span",37),r(19),t()(),u(20,H,6,6,"div",38)(21,q,6,6,"div",38),t(),a(22,"div",39)(23,"span",40),r(24),t(),a(25,"span",41),r(26),t()()()),o&2){let e=d.$implicit,i=l(3);w("draft",e.summary.status==="draft")("completed",e.summary.status==="completed")("comparison-mode",i.comparisonMode)("selected-for-comparison",i.selectedForComparison.has(e.id)),s(),m("ngIf",i.comparisonMode),s(4),g(e.clientName||"Cliente sin nombre"),s(2),g(e.scenarioTitle),s(),m("ngIf",!i.comparisonMode),s(6),g(i.getMarketLabel(e.market)),s(5),g(e.clientType),s(),m("ngIf",e.summary.targetAmount),s(),m("ngIf",e.summary.monthlyContribution),s(3),C(" ",i.formatLastModified(e.lastModified)," "),s(),S(e.summary.status),s(),C(" ",e.summary.status==="draft"?"\u{1F4DD} Borrador":"\u2705 Completado"," ")}}function G(o,d){if(o&1){let e=h();a(0,"button",56),b("click",function(){x(e);let n=l(5);return _(n.clearSelection())}),r(1," Limpiar "),t()}}function J(o,d){if(o&1&&(a(0,"div",53)(1,"span",54),r(2),t(),u(3,G,2,0,"button",55),t()),o&2){let e=l(4);s(2),C(" ",e.selectedForComparison.size,"/3 seleccionados "),s(),m("ngIf",e.selectedForComparison.size>0)}}function W(o,d){if(o&1){let e=h();a(0,"div",57)(1,"button",58),b("click",function(){x(e);let n=l(4);return _(n.compareSelectedSimulations())}),r(2),t()()}if(o&2){let e=l(4);s(),m("disabled",e.selectedForComparison.size<2),s(),C(" \u{1F52C} Comparar ",e.selectedForComparison.size," Escenarios ")}}function Q(o,d){if(o&1){let e=h();a(0,"div",48)(1,"div",49)(2,"button",50),b("click",function(){x(e);let n=l(3);return _(n.toggleComparisonMode())}),r(3),t(),u(4,J,4,2,"div",51),t(),u(5,W,3,2,"div",52),t()}if(o&2){let e=l(3);s(2),w("active",e.comparisonMode),s(),C(" ",e.comparisonMode?"\u2705 Modo Comparaci\xF3n":"\u{1F4CA} Comparar Escenarios"," "),s(),m("ngIf",e.comparisonMode),s(),m("ngIf",e.comparisonMode&&e.selectedForComparison.size>1)}}function Z(o,d){if(o&1){let e=h();a(0,"div",59)(1,"button",60),b("click",function(){x(e);let n=l(3);return _(n.showAllSimulations())}),r(2),t()()}if(o&2){let e=l(3);s(2),C(" Ver todas las simulaciones (",e.savedSimulations.length,") ")}}function ee(o,d){if(o&1&&(a(0,"div",22)(1,"div",23)(2,"h2"),r(3,"\u{1F4BE} Simulaciones Recientes (Borradores)"),t(),a(4,"p"),r(5,"Contin\xFAa donde lo dejaste"),t()(),a(6,"div",24),u(7,K,27,20,"div",25),t(),u(8,Q,6,5,"div",26)(9,Z,3,1,"div",27),t()),o&2){let e=l(2);s(7),m("ngForOf",e.savedSimulations.slice(0,5)),s(),m("ngIf",e.savedSimulations.length>1),s(),m("ngIf",e.savedSimulations.length>5)}}function te(o,d){o&1&&(a(0,"div",61)(1,"div",62)(2,"div",63),r(3,"\u{1F4CA}"),t(),a(4,"h3"),r(5,"Primera vez en el Hub de Simuladores"),t(),a(6,"p"),r(7,"Selecciona un escenario arriba para comenzar tu primera simulaci\xF3n. Tus borradores aparecer\xE1n aqu\xED para continuar m\xE1s tarde."),t()()())}function ne(o,d){if(o&1){let e=h();a(0,"div",3)(1,"div",4)(2,"button",5),b("click",function(){x(e);let n=l();return _(n.goBack())}),r(3,"\u2190 Dashboard"),t(),a(4,"h1"),r(5,"\u{1F9E0} Hub de Simuladores"),t(),a(6,"p"),r(7,"Cerebro de orquestaci\xF3n para escenarios de valor"),t()(),a(8,"div",6),u(9,B,12,6,"div",7),t(),u(10,Y,9,3,"div",8)(11,ee,10,3,"div",9)(12,te,8,0,"div",10),t()}if(o&2){let e=l();s(9),m("ngForOf",e.availableScenarios),s(),m("ngIf",e.smartContext.hasContext),s(),m("ngIf",e.savedSimulations.length>0),s(),m("ngIf",e.savedSimulations.length===0&&!e.smartContext.hasContext)}}function ie(o,d){if(o&1&&(a(0,"div",64)(1,"div",65),k(2,"div",66),a(3,"h2"),r(4,"\u{1F9E0} Analizando contexto..."),t(),a(5,"p"),r(6),t()()()),o&2){let e=l();s(6),g(e.redirectMessage)}}function oe(o,d){if(o&1&&(a(0,"th",89)(1,"div",90)(2,"div",91),r(3),t(),a(4,"div",92),r(5),t(),a(6,"div",93),r(7),t()()()),o&2){let e=d.$implicit,i=l(2);s(3),g(e.clientName),s(2),g(e.scenarioTitle),s(2),g(i.getMarketLabel(e.market))}}function ae(o,d){if(o&1&&(a(0,"td",94),r(1),y(2,"currency"),t()),o&2){let e=d.$implicit;s(),C(" ",e.summary.targetAmount?O(2,1,e.summary.targetAmount,"MXN","symbol","1.0-0"):"N/D"," ")}}function re(o,d){if(o&1&&(a(0,"td",94),r(1),y(2,"currency"),t()),o&2){let e=d.$implicit;s(),C(" ",e.summary.monthlyContribution?O(2,1,e.summary.monthlyContribution,"MXN","symbol","1.0-0"):"N/D"," ")}}function ce(o,d){if(o&1&&(a(0,"td",94),r(1),t()),o&2){let e=d.$implicit;s(),C(" ",e.summary.timeToTarget?e.summary.timeToTarget+" meses":"N/D"," ")}}function se(o,d){if(o&1&&(a(0,"td",94),r(1),t()),o&2){let e=d.$implicit;s(),C(" ",e.clientType," ")}}function le(o,d){if(o&1&&(a(0,"td",94)(1,"span",95),r(2),t()()),o&2){let e=d.$implicit;s(),S(e.summary.status),s(),C(" ",e.summary.status==="draft"?"\u{1F4DD} Borrador":"\u2705 Completado"," ")}}function de(o,d){if(o&1&&(a(0,"td",94)(1,"div",96),r(2),t()()),o&2){let e=d.$implicit,i=l(2);s(),S(i.getEfficiencyClass(e)),s(),C(" ",i.getEfficiencyScore(e)," ")}}function me(o,d){if(o&1){let e=h();a(0,"div",67)(1,"div",68),b("click",function(){x(e);let n=l();return _(n.closeComparisonModal())}),t(),a(2,"div",69)(3,"div",70)(4,"h2"),r(5,"\u{1F4CA} Comparaci\xF3n de Escenarios"),t(),a(6,"button",71),b("click",function(){x(e);let n=l();return _(n.closeComparisonModal())}),r(7,"\xD7"),t()(),a(8,"div",72)(9,"table",73)(10,"thead")(11,"tr")(12,"th",74),r(13,"M\xE9trica"),t(),u(14,oe,8,3,"th",75),t()(),a(15,"tbody")(16,"tr",76)(17,"td",77),r(18,"\u{1F3AF} Meta Total"),t(),u(19,ae,3,6,"td",78),t(),a(20,"tr",76)(21,"td",77),r(22,"\u{1F4B0} Aportaci\xF3n Mensual"),t(),u(23,re,3,6,"td",78),t(),a(24,"tr",76)(25,"td",77),r(26,"\u23F1\uFE0F Tiempo a la Meta"),t(),u(27,ce,2,1,"td",78),t(),a(28,"tr",76)(29,"td",77),r(30,"\u{1F4CA} Tipo de Cliente"),t(),u(31,se,2,1,"td",78),t(),a(32,"tr",76)(33,"td",77),r(34,"\u{1F4C5} Estado"),t(),u(35,le,3,3,"td",78),t(),a(36,"tr",79)(37,"td",77),r(38,"\u{1F3AF} Eficiencia"),t(),u(39,de,3,3,"td",78),t()()()(),a(40,"div",80)(41,"h3"),r(42,"\u{1F4A1} Insights Autom\xE1ticos"),t(),a(43,"div",81)(44,"div",82)(45,"div",83),r(46,"\u{1F451}"),t(),a(47,"div",84)(48,"h4"),r(49,"Mejor Opci\xF3n"),t(),a(50,"p"),r(51),t()()(),a(52,"div",82)(53,"div",83),r(54,"\u26A1"),t(),a(55,"div",84)(56,"h4"),r(57,"M\xE1s R\xE1pido"),t(),a(58,"p"),r(59),t()()(),a(60,"div",82)(61,"div",83),r(62,"\u{1F4B0}"),t(),a(63,"div",84)(64,"h4"),r(65,"Menor Aportaci\xF3n"),t(),a(66,"p"),r(67),t()()()()(),a(68,"div",85)(69,"button",86),b("click",function(){x(e);let n=l();return _(n.exportComparison())}),r(70," \u{1F4CB} Exportar Comparaci\xF3n "),t(),a(71,"button",87),b("click",function(){x(e);let n=l();return _(n.shareComparison())}),r(72," \u{1F4F1} Compartir WhatsApp "),t(),a(73,"button",88),b("click",function(){x(e);let n=l();return _(n.closeComparisonModal())}),r(74," Cerrar "),t()()()()}if(o&2){let e=l();s(14),m("ngForOf",e.getSelectedSimulations()),s(5),m("ngForOf",e.getSelectedSimulations()),s(4),m("ngForOf",e.getSelectedSimulations()),s(4),m("ngForOf",e.getSelectedSimulations()),s(4),m("ngForOf",e.getSelectedSimulations()),s(4),m("ngForOf",e.getSelectedSimulations()),s(4),m("ngForOf",e.getSelectedSimulations()),s(12),g(e.getBestOption()),s(8),g(e.getFastestOption()),s(8),g(e.getLowestContributionOption())}}var xe=(()=>{class o{constructor(e,i){this.router=e,this.route=i,this.isRedirecting=!1,this.redirectMessage="",this.smartContext={hasContext:!1,market:"",clientType:"",clientName:"",source:""},this.savedSimulations=[],this.selectedForComparison=new Set,this.showComparisonModal=!1,this.comparisonMode=!1,this.availableScenarios=[{id:"ags-ahorro",title:"Proyector de Ahorro y Liquidaci\xF3n",subtitle:"\u{1F335} AGS Individual",icon:"\u{1F3E6}",description:"Modela un plan de ahorro con aportaci\xF3n fuerte y recaudaci\xF3n para clientes de Aguascalientes.",market:"aguascalientes",clientType:"Individual",route:"/simulador/ags-ahorro",gradient:"ags-gradient"},{id:"edomex-individual",title:"Planificador de Enganche",subtitle:"\u{1F3E2} EdoMex Individual",icon:"\u{1F4CA}",description:"Proyecta el tiempo para alcanzar la meta de enganche para un cliente individual en EdoMex.",market:"edomex",clientType:"Individual",route:"/simulador/edomex-individual",gradient:"edomex-individual-gradient"},{id:"tanda-colectiva",title:"Simulador de Tanda Colectiva",subtitle:"\u{1F465} EdoMex Colectivo",icon:"\u{1F504}",description:'Modela el "efecto bola de nieve" para un grupo de cr\xE9dito colectivo.',market:"edomex",clientType:"Colectivo",route:"/simulador/tanda-colectiva",gradient:"edomex-collective-gradient"}]}ngOnInit(){this.analyzeContext(),this.loadSavedSimulations()}analyzeContext(){this.route.queryParams.subscribe(e=>{let i=e.market,n=e.clientType,c=e.clientName,p=e.source;i&&n&&(this.smartContext={hasContext:!0,market:i,clientType:n,clientName:c||"",source:p||"unknown"},this.performSmartRedirection())})}performSmartRedirection(){if(!this.smartContext.hasContext)return;this.isRedirecting=!0,this.redirectMessage=`Detect\xE9 contexto: ${this.smartContext.market} ${this.smartContext.clientType}. Navegando al simulador \xF3ptimo...`;let e=this.availableScenarios.find(i=>i.market===this.smartContext.market&&i.clientType===this.smartContext.clientType);e?setTimeout(()=>{this.redirectMessage=`Lanzando ${e.title}...`,setTimeout(()=>{this.router.navigate([e.route],{queryParams:{market:this.smartContext.market,clientType:this.smartContext.clientType,clientName:this.smartContext.clientName,fromHub:"true"}})},800)},1200):this.isRedirecting=!1}selectScenario(e){this.router.navigate(["/nueva-oportunidad"],{queryParams:{market:e.market,clientType:e.clientType,preselectedFlow:"SIMULACION",targetSimulator:e.id,fromHub:"true"}})}goBack(){this.router.navigate(["/dashboard"])}loadSavedSimulations(){let i=Object.keys(localStorage).filter(n=>n.includes("-draft")||n.includes("Scenario")||n.includes("agsScenario")||n.includes("edomexScenario"));this.savedSimulations=[],i.forEach(n=>{try{let c=JSON.parse(localStorage.getItem(n)||"{}");if(this.isValidSimulationDraft(c)){let p={id:n,clientName:c.clientName||c.client?.name||"Cliente sin nombre",scenarioType:this.inferScenarioType(n,c),scenarioTitle:this.getScenarioTitle(n,c),market:c.market||this.inferMarket(n),clientType:c.clientType||this.inferClientType(n),lastModified:c.timestamp||c.lastModified||Date.now(),draftKey:n,summary:this.extractSummary(c,n)};this.savedSimulations.push(p)}}catch(c){console.warn(`Error parsing draft ${n}:`,c)}}),this.savedSimulations.sort((n,c)=>c.lastModified-n.lastModified)}isValidSimulationDraft(e){return e&&(e.clientName||e.targetAmount||e.monthlyContribution||e.scenario||e.configParams)}inferScenarioType(e,i){return e.includes("ags")||i.market==="aguascalientes"?"ags-ahorro":e.includes("edomex-individual")||i.type==="EDOMEX_INDIVIDUAL"?"edomex-individual":e.includes("tanda")||e.includes("collective")||i.type==="EDOMEX_COLLECTIVE"?"tanda-colectiva":"unknown"}getScenarioTitle(e,i){let n=this.inferScenarioType(e,i);return this.availableScenarios.find(p=>p.id===n)?.title||"Simulaci\xF3n"}inferMarket(e){return e.includes("ags")?"aguascalientes":e.includes("edomex")?"edomex":"unknown"}inferClientType(e){return e.includes("individual")?"Individual":e.includes("collective")||e.includes("tanda")?"Colectivo":"Individual"}extractSummary(e,i){let n={status:"draft"};return e.scenario&&(n.targetAmount=e.scenario.targetAmount,n.monthlyContribution=e.scenario.monthlyContribution,n.timeToTarget=e.scenario.monthsToTarget),(e.targetDownPayment||e.configParams?.targetDownPayment)&&(n.targetAmount=e.targetDownPayment||e.configParams?.targetDownPayment),e.simulationResult&&(n.targetAmount=e.simulationResult.scenario?.targetAmount,n.monthlyContribution=e.simulationResult.scenario?.monthlyContribution,n.timeToTarget=e.simulationResult.scenario?.monthsToTarget),e.targetAmount&&(n.targetAmount=e.targetAmount),e.monthlyContribution&&(n.monthlyContribution=e.monthlyContribution),n}continueSimulation(e){let i=this.availableScenarios.find(n=>n.id===e.scenarioType);i?this.router.navigate([i.route],{queryParams:{market:e.market,clientType:e.clientType,clientName:e.clientName,resumeDraft:"true",draftKey:e.draftKey}}):console.error("Scenario not found:",e.scenarioType)}deleteSimulation(e){confirm("\xBFEst\xE1s seguro de eliminar esta simulaci\xF3n? Esta acci\xF3n no se puede deshacer.")&&(localStorage.removeItem(e),this.loadSavedSimulations())}showAllSimulations(){console.log("Show all simulations - Future implementation")}getMarketLabel(e){switch(e){case"aguascalientes":return"Aguascalientes";case"edomex":return"Estado de M\xE9xico";default:return e}}formatLastModified(e){let n=Date.now()-e,c=Math.floor(n/(1e3*60)),p=Math.floor(n/(1e3*60*60)),f=Math.floor(n/(1e3*60*60*24));return c<1?"Hace un momento":c<60?`Hace ${c} min`:p<24?`Hace ${p}h`:f<7?`Hace ${f} d\xEDas`:new Date(e).toLocaleDateString("es-MX",{day:"numeric",month:"short"})}toggleComparisonMode(){this.comparisonMode=!this.comparisonMode,this.comparisonMode||this.selectedForComparison.clear()}toggleSimulationSelection(e){this.selectedForComparison.has(e)?this.selectedForComparison.delete(e):this.selectedForComparison.size<3&&this.selectedForComparison.add(e)}clearSelection(){this.selectedForComparison.clear()}compareSelectedSimulations(){this.selectedForComparison.size>=2&&(this.showComparisonModal=!0)}getSelectedSimulations(){return this.savedSimulations.filter(e=>this.selectedForComparison.has(e.id))}getEfficiencyScore(e){if(!e.summary.targetAmount||!e.summary.monthlyContribution)return"N/D";let i=e.summary.targetAmount,n=e.summary.monthlyContribution,c=e.summary.timeToTarget||0,p=n/i,f=c>0?1/c*100:0,M=p*6e4+f*40;return M>=80?"Excelente":M>=60?"Buena":M>=40?"Regular":"Baja"}getEfficiencyClass(e){switch(this.getEfficiencyScore(e)){case"Excelente":return"excellent";case"Buena":return"good";case"Regular":return"fair";default:return"poor"}}getBestOption(){let e=this.getSelectedSimulations();if(e.length===0)return"No hay simulaciones seleccionadas";let i=e[0],n=-1;return e.forEach(c=>{let p=this.calculateOverallScore(c);p>n&&(n=p,i=c)}),`${i.clientName} - ${i.scenarioTitle}`}getFastestOption(){let e=this.getSelectedSimulations();if(e.length===0)return"No hay simulaciones seleccionadas";let i=e.filter(c=>c.summary.timeToTarget);if(i.length===0)return"Informaci\xF3n de tiempo no disponible";let n=i.reduce((c,p)=>(p.summary.timeToTarget||999)<(c.summary.timeToTarget||999)?p:c);return`${n.clientName} - ${n.summary.timeToTarget} meses`}getLowestContributionOption(){let e=this.getSelectedSimulations();if(e.length===0)return"No hay simulaciones seleccionadas";let i=e.filter(c=>c.summary.monthlyContribution);if(i.length===0)return"Informaci\xF3n de aportaci\xF3n no disponible";let n=i.reduce((c,p)=>(p.summary.monthlyContribution||999999)<(c.summary.monthlyContribution||999999)?p:c);return`${n.clientName} - $${n.summary.monthlyContribution?.toLocaleString("es-MX")}`}calculateOverallScore(e){let i=0;if(e.summary.status==="completed"&&(i+=30),e.summary.targetAmount){let c=e.summary.targetAmount;c>=5e4&&c<=5e5?i+=20:c>=2e4&&c<=1e6&&(i+=10)}if(e.summary.monthlyContribution){let c=e.summary.monthlyContribution;c<=3e3?i+=25:c<=7e3?i+=15:c<=15e3&&(i+=5)}if(e.summary.timeToTarget){let c=e.summary.timeToTarget;c<=12?i+=15:c<=24?i+=10:c<=36&&(i+=5)}let n=(Date.now()-e.lastModified)/(1e3*60*60*24);return n<=1?i+=10:n<=7&&(i+=5),i}exportComparison(){let e=this.getSelectedSimulations(),i={timestamp:new Date().toISOString(),simulations:e.map(f=>({clientName:f.clientName,scenarioTitle:f.scenarioTitle,market:this.getMarketLabel(f.market),clientType:f.clientType,targetAmount:f.summary.targetAmount,monthlyContribution:f.summary.monthlyContribution,timeToTarget:f.summary.timeToTarget,status:f.summary.status,efficiency:this.getEfficiencyScore(f)})),insights:{bestOption:this.getBestOption(),fastestOption:this.getFastestOption(),lowestContribution:this.getLowestContributionOption()}},n=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),c=window.URL.createObjectURL(n),p=document.createElement("a");p.href=c,p.download=`comparacion-simulaciones-${new Date().toISOString().split("T")[0]}.json`,p.click(),window.URL.revokeObjectURL(c)}shareComparison(){let e=this.getSelectedSimulations(),i=this.getBestOption(),n=this.getFastestOption(),c=this.getLowestContributionOption(),p=`\u{1F4CA} *Comparaci\xF3n de Simulaciones*

\u{1F52C} Analizadas: ${e.length} opciones

\u{1F451} *Mejor Opci\xF3n General:*
${i}

\u26A1 *Opci\xF3n M\xE1s R\xE1pida:*
${n}

\u{1F4B0} *Menor Aportaci\xF3n Mensual:*
${c}

\u{1F4CB} *Detalles:*
`+e.map(v=>{let V=v.summary.targetAmount?`$${v.summary.targetAmount.toLocaleString("es-MX")}`:"N/D",L=v.summary.monthlyContribution?`$${v.summary.monthlyContribution.toLocaleString("es-MX")}`:"N/D",R=v.summary.timeToTarget?`${v.summary.timeToTarget} meses`:"N/D";return`\u2022 ${v.clientName} (${v.scenarioTitle})
  Meta: ${V} | Mensual: ${L} | Tiempo: ${R}`}).join(`
`)+`

\u{1F697} Generado desde Conductores PWA`,M=`https://wa.me/?text=${encodeURIComponent(p)}`;window.open(M,"_blank")}closeComparisonModal(){this.showComparisonModal=!1}static{this.\u0275fac=function(i){return new(i||o)(P(N),P($))}}static{this.\u0275cmp=E({type:o,selectors:[["app-simulador-main"]],standalone:!0,features:[D],decls:3,vars:3,consts:[["class","simulator-hub",4,"ngIf"],["class","smart-redirect",4,"ngIf"],["class","comparison-modal",4,"ngIf"],[1,"simulator-hub"],[1,"hub-header"],[1,"back-btn",3,"click"],[1,"scenarios-grid"],["class","scenario-card",3,"class","click",4,"ngFor","ngForOf"],["class","context-info",4,"ngIf"],["class","saved-simulations",4,"ngIf"],["class","empty-simulations",4,"ngIf"],[1,"scenario-card",3,"click"],[1,"scenario-icon"],[1,"scenario-content"],[1,"scenario-subtitle"],[1,"scenario-description"],[1,"scenario-arrow"],[1,"context-info"],[1,"context-banner"],[1,"context-icon"],[1,"context-text"],[4,"ngIf"],[1,"saved-simulations"],[1,"section-header"],[1,"simulations-grid"],["class","simulation-card",3,"draft","completed","comparison-mode","selected-for-comparison",4,"ngFor","ngForOf"],["class","comparison-controls",4,"ngIf"],["class","simulations-actions",4,"ngIf"],[1,"simulation-card"],["class","comparison-checkbox",4,"ngIf"],[1,"simulation-header"],[1,"simulation-meta"],[1,"simulation-type"],["class","simulation-actions",4,"ngIf"],[1,"simulation-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],[1,"simulation-footer"],[1,"last-modified"],[1,"simulation-status"],[1,"comparison-checkbox"],["type","checkbox",3,"change","id","checked","disabled"],[1,"checkbox-label",3,"for"],[1,"simulation-actions"],[1,"continue-btn",3,"click"],[1,"delete-btn",3,"click"],[1,"comparison-controls"],[1,"comparison-header"],[1,"comparison-toggle-btn",3,"click"],["class","comparison-counter",4,"ngIf"],["class","comparison-actions",4,"ngIf"],[1,"comparison-counter"],[1,"counter-text"],["class","clear-selection-btn",3,"click",4,"ngIf"],[1,"clear-selection-btn",3,"click"],[1,"comparison-actions"],[1,"compare-btn",3,"click","disabled"],[1,"simulations-actions"],[1,"show-all-btn",3,"click"],[1,"empty-simulations"],[1,"empty-content"],[1,"empty-icon"],[1,"smart-redirect"],[1,"redirect-content"],[1,"redirect-spinner"],[1,"comparison-modal"],[1,"modal-overlay",3,"click"],[1,"comparison-modal-content"],[1,"comparison-modal-header"],[1,"modal-close-btn",3,"click"],[1,"comparison-table-container"],[1,"comparison-table"],[1,"metric-column"],["class","scenario-column",4,"ngFor","ngForOf"],[1,"metric-row"],[1,"metric-label"],["class","metric-value",4,"ngFor","ngForOf"],[1,"metric-row","highlight-row"],[1,"comparison-insights"],[1,"insights-grid"],[1,"insight-card"],[1,"insight-icon"],[1,"insight-content"],[1,"comparison-modal-actions"],[1,"export-btn",3,"click"],[1,"share-btn",3,"click"],[1,"close-modal-btn",3,"click"],[1,"scenario-column"],[1,"scenario-header"],[1,"scenario-name"],[1,"scenario-type"],[1,"scenario-market"],[1,"metric-value"],[1,"status-badge"],[1,"efficiency-score"]],template:function(i,n){i&1&&u(0,ne,13,4,"div",0)(1,ie,7,1,"div",1)(2,me,75,10,"div",2),i&2&&(m("ngIf",!n.isRedirecting),s(),m("ngIf",n.isRedirecting),s(),m("ngIf",n.showComparisonModal))},dependencies:[A,I,F,z],styles:['@charset "UTF-8";.simulator-hub[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:24px}.hub-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:48px}.back-btn[_ngcontent-%COMP%]{display:inline-block;margin-bottom:16px;padding:8px 16px;background:#ffffffe6;border:1px solid #e2e8f0;border-radius:8px;cursor:pointer;transition:all .2s;font-weight:500}.back-btn[_ngcontent-%COMP%]:hover{background:#fff;border-color:#cbd5e1;transform:translateY(-1px)}.hub-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;font-weight:800;color:#1e293b;margin:0 0 8px;background:linear-gradient(135deg,#3b82f6,#8b5cf6);background-clip:text;-webkit-background-clip:text;color:transparent}.hub-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:18px;margin:0}.scenarios-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:24px;max-width:1200px;margin:0 auto 32px}@media (max-width: 768px){.scenarios-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}.scenario-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:2px solid transparent;position:relative;overflow:hidden;min-height:200px;display:flex;flex-direction:column}.scenario-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:currentColor;opacity:.8}.scenario-card.ags-gradient[_ngcontent-%COMP%]{border-color:#f59e0b;color:#92400e}.scenario-card.ags-gradient[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fef3c7,#fde68a);transform:translateY(-4px);box-shadow:0 20px 40px #f59e0b26}.scenario-card.edomex-individual-gradient[_ngcontent-%COMP%]{border-color:#3b82f6;color:#1d4ed8}.scenario-card.edomex-individual-gradient[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dbeafe,#bfdbfe);transform:translateY(-4px);box-shadow:0 20px 40px #3b82f626}.scenario-card.edomex-collective-gradient[_ngcontent-%COMP%]{border-color:#8b5cf6;color:#6d28d9}.scenario-card.edomex-collective-gradient[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ede9fe,#ddd6fe);transform:translateY(-4px);box-shadow:0 20px 40px #8b5cf626}.scenario-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;text-align:center}.scenario-content[_ngcontent-%COMP%]{flex:1}.scenario-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:700;margin:0 0 8px;color:inherit}.scenario-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin:0 0 12px;opacity:.8}.scenario-description[_ngcontent-%COMP%]{font-size:16px;line-height:1.5;margin:0;color:#64748b}.scenario-arrow[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;font-size:24px;font-weight:700;opacity:0;transition:all .3s;color:inherit}.scenario-card[_ngcontent-%COMP%]:hover   .scenario-arrow[_ngcontent-%COMP%]{opacity:1;transform:translate(4px)}.context-info[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.context-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af);color:#fff;padding:16px 24px;border-radius:12px;display:flex;align-items:center;gap:12px;box-shadow:0 10px 25px #3b82f633}.context-icon[_ngcontent-%COMP%]{font-size:24px}.context-text[_ngcontent-%COMP%]{flex:1;font-size:16px}.smart-redirect[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2)}.redirect-content[_ngcontent-%COMP%]{text-align:center;color:#fff;max-width:400px;padding:40px}.redirect-spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid rgba(255,255,255,.2);border-top:4px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 24px}.redirect-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0 0 16px}.redirect-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;opacity:.9;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.saved-simulations[_ngcontent-%COMP%]{max-width:1200px;margin:48px auto 0}.section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1e293b;margin:0 0 8px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:16px;margin:0}.simulations-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:24px}@media (max-width: 768px){.simulations-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}.simulation-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:2px solid transparent;transition:all .3s ease;position:relative}.simulation-card.draft[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,#fef9e7,#fff)}.simulation-card.completed[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#ecfdf5,#fff)}.simulation-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}.simulation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.simulation-meta[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1e293b;margin:0 0 4px}.simulation-type[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.simulation-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.continue-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s;font-weight:500}.continue-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.continue-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.05)}.delete-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.delete-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.simulation-details[_ngcontent-%COMP%]{margin-bottom:16px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 0;font-size:14px}.detail-label[_ngcontent-%COMP%]{color:#6b7280;font-weight:500}.detail-value[_ngcontent-%COMP%]{color:#1e293b;font-weight:600}.simulation-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:16px;border-top:1px solid #e5e7eb;font-size:12px}.last-modified[_ngcontent-%COMP%]{color:#6b7280}.simulation-status[_ngcontent-%COMP%]{font-weight:600;padding:2px 8px;border-radius:4px}.simulation-status.draft[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.simulation-status.completed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.simulations-actions[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.show-all-btn[_ngcontent-%COMP%]{padding:12px 24px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;color:#64748b;cursor:pointer;transition:all .2s;font-weight:500}.show-all-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#cbd5e1}.empty-simulations[_ngcontent-%COMP%]{max-width:400px;margin:48px auto;text-align:center}.empty-content[_ngcontent-%COMP%]{padding:40px 24px;background:#fff;border-radius:16px;border:2px dashed #e2e8f0}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1e293b;margin:0 0 12px}.empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;line-height:1.5;margin:0}.comparison-controls[_ngcontent-%COMP%]{margin-top:32px;padding:24px;background:#fff;border-radius:12px;border:2px solid #e2e8f0}.comparison-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.comparison-toggle-btn[_ngcontent-%COMP%]{padding:12px 24px;border:2px solid #3b82f6;border-radius:8px;background:#fff;color:#3b82f6;font-weight:600;cursor:pointer;transition:all .3s ease}.comparison-toggle-btn[_ngcontent-%COMP%]:hover, .comparison-toggle-btn.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;transform:translateY(-1px)}.comparison-counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.counter-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#6b7280}.clear-selection-btn[_ngcontent-%COMP%]{padding:6px 12px;background:#f3f4f6;border:1px solid #d1d5db;border-radius:6px;color:#6b7280;font-size:12px;cursor:pointer;transition:all .2s}.clear-selection-btn[_ngcontent-%COMP%]:hover{background:#ef4444;border-color:#ef4444;color:#fff}.comparison-actions[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.compare-btn[_ngcontent-%COMP%]{padding:14px 28px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;font-weight:600;font-size:16px;cursor:pointer;transition:all .3s ease}.compare-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#059669,#047857);transform:translateY(-2px);box-shadow:0 10px 25px #10b9814d}.compare-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}.simulation-card.comparison-mode[_ngcontent-%COMP%]{position:relative;cursor:pointer}.simulation-card.selected-for-comparison[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#dbeafe,#fff);transform:translateY(-2px);box-shadow:0 8px 25px #3b82f626}.comparison-checkbox[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;z-index:10}.comparison-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.checkbox-label[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;border:2px solid #d1d5db;border-radius:4px;cursor:pointer;position:relative;transition:all .3s ease;background:#fff}.comparison-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]{background:#3b82f6;border-color:#3b82f6}.comparison-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkbox-label[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700;font-size:14px}.comparison-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled + .checkbox-label[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.comparison-modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px}.modal-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.comparison-modal-content[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:16px;max-width:1200px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px -12px #00000040}.comparison-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px;border-bottom:1px solid #e5e7eb;background:linear-gradient(135deg,#f8fafc,#fff)}.comparison-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1e293b;margin:0}.modal-close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#6b7280;cursor:pointer;padding:4px;border-radius:4px;transition:all .2s}.modal-close-btn[_ngcontent-%COMP%]:hover{color:#1e293b;background:#f3f4f6}.comparison-table-container[_ngcontent-%COMP%]{padding:32px;overflow-x:auto}.comparison-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;text-align:left;border-bottom:1px solid #e5e7eb}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600;color:#374151}.metric-column[_ngcontent-%COMP%]{width:200px;font-weight:700}.scenario-column[_ngcontent-%COMP%]{min-width:180px}.scenario-header[_ngcontent-%COMP%]{text-align:center}.scenario-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1e293b;margin-bottom:4px}.scenario-type[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-bottom:2px}.scenario-market[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af}.metric-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.highlight-row[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fbbf24)}.highlight-row[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fde68a,#f59e0b)}.metric-label[_ngcontent-%COMP%]{font-weight:600;color:#374151}.metric-value[_ngcontent-%COMP%]{font-weight:500;text-align:center}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600}.status-badge.draft[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.status-badge.completed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.efficiency-score[_ngcontent-%COMP%]{padding:6px 12px;border-radius:6px;font-weight:700;text-align:center}.efficiency-score.excellent[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.efficiency-score.good[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.efficiency-score.fair[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.comparison-insights[_ngcontent-%COMP%]{padding:32px;background:#f8fafc}.comparison-insights[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1e293b;margin:0 0 20px;text-align:center}.insights-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.insight-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;border:1px solid #e5e7eb;transition:all .3s ease}.insight-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}.insight-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.insight-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b;margin:0 0 4px}.insight-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.comparison-modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;padding:24px 32px;border-top:1px solid #e5e7eb;background:#f8fafc}.export-btn[_ngcontent-%COMP%], .share-btn[_ngcontent-%COMP%], .close-modal-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.export-btn[_ngcontent-%COMP%]{background:#8b5cf6;color:#fff}.export-btn[_ngcontent-%COMP%]:hover{background:#7c3aed;transform:translateY(-1px)}.share-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff}.share-btn[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}.close-modal-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.close-modal-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}@media (max-width: 768px){.comparison-modal-content[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.comparison-table-container[_ngcontent-%COMP%]{padding:16px}.comparison-table[_ngcontent-%COMP%]{font-size:12px}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}.insights-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.comparison-modal-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px}}']})}}return o})();export{xe as SimuladorMainComponent};
