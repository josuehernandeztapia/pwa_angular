{
  "stats": {
    "suites": 2,
    "tests": 1,
    "passes": 0,
    "pending": 0,
    "failures": 1,
    "start": "2025-09-26T04:33:15.356Z",
    "end": "2025-09-26T04:33:50.426Z",
    "duration": 35070,
    "testsRegistered": 23,
    "passPercent": 0,
    "pendingPercent": 0,
    "other": 1,
    "hasOther": true,
    "skipped": 21,
    "hasSkipped": true
  },
  "results": [
    {
      "uuid": "02356df1-d849-42af-af26-fe1d56594349",
      "title": "",
      "fullFile": "cypress/e2e/04-quote-management.cy.ts",
      "file": "cypress/e2e/04-quote-management.cy.ts",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "3e3c0773-39f3-43a5-8e7a-4a65c6f7a0ee",
          "title": "Quote Management",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [],
          "suites": [
            {
              "uuid": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
              "title": "Quote Creation Flow",
              "fullFile": "",
              "file": "",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should create new quote from scratch",
                  "fullTitle": "Quote Management Quote Creation Flow should create new quote from scratch",
                  "timedOut": null,
                  "duration": 10899,
                  "state": "failed",
                  "speed": null,
                  "pass": false,
                  "fail": true,
                  "pending": false,
                  "context": "[\n  {\n    \"title\": \"cypress-mochawesome-reporter-videos-failed\",\n    \"value\": \"cypress/e2e/04-quote-management.cy.ts\"\n  },\n  {\n    \"title\": \"cypress-mochawesome-reporter-screenshots\",\n    \"value\": [\n      [\n        \"/04-quote-management.cy.ts/Quote Management -- Quote Creation Flow -- should create new quote from scratch (failed).png\"\n      ],\n      [\n        \"/04-quote-management.cy.ts/Quote Management -- Quote Creation Flow -- should create new quote from scratch (failed) (attempt 2).png\"\n      ],\n      [\n        \"/04-quote-management.cy.ts/Quote Management -- should create new quote from scratch -- before each hook (failed) (attempt 3).png\"\n      ]\n    ]\n  }\n]",
                  "code": "cy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Step 1: Client Selection\ncy.get('[data-cy=\"quote-form\"]').should('be.visible');\ncy.contains('Nueva Cotización').should('be.visible');\ncy.get('[data-cy=\"client-selector\"]').click();\ncy.get('[data-cy=\"client-option\"]').first().click();\ncy.get('[data-cy=\"next-step\"]').click();\n// Step 2: Product Configuration\ncy.get('[data-cy=\"product-selector\"]').should('be.visible');\ncy.get('[data-cy=\"product-card\"]').first().click();\n// Configure product details\ncy.get('[data-cy=\"product-variant\"]').select('premium');\ncy.get('[data-cy=\"product-color\"]').select('blanco');\ncy.get('[data-cy=\"additional-features\"]').check(['GPS', 'seguro-extendido']);\ncy.get('[data-cy=\"next-step\"]').click();\n// Step 3: Financing Options\ncy.get('[data-cy=\"financing-section\"]').should('be.visible');\ncy.get('[data-cy=\"down-payment\"]').clear().type('50000');\ncy.get('[data-cy=\"payment-terms\"]').select('48');\ncy.get('[data-cy=\"interest-rate\"]').should('contain', '12.5%');\n// Verify payment calculation\ncy.get('[data-cy=\"monthly-payment\"]').should('contain', '$');\ncy.get('[data-cy=\"total-amount\"]').should('contain', '$');\ncy.get('[data-cy=\"next-step\"]').click();\n// Step 4: Review and Submit\ncy.get('[data-cy=\"quote-review\"]').should('be.visible');\ncy.contains('Resumen de Cotización').should('be.visible');\n// Verify all information is correct\ncy.get('[data-cy=\"review-client\"]').should('be.visible');\ncy.get('[data-cy=\"review-product\"]').should('be.visible');\ncy.get('[data-cy=\"review-financing\"]').should('be.visible');\n// Mock successful quote creation\ncy.intercept('POST', '**/api/quotes', {\n    statusCode: 201,\n    body: {\n        id: 'quote-001',\n        number: 'COT-2024-001',\n        clientId: 'client-001',\n        status: 'pending',\n        totalAmount: 280000,\n        createdAt: '2024-02-03T16:00:00Z'\n    }\n}).as('createQuote');\ncy.get('[data-cy=\"submit-quote\"]').click();\ncy.wait('@createQuote');\ncy.verifyToast('Cotización creada exitosamente', 'success');\n// Should redirect to quote details\ncy.url().should('include', '/cotizaciones/quote-001');",
                  "err": {
                    "message": "AssertionError: Timed out retrying after 10000ms: Expected to find element: `[data-cy=\"email-input\"]`, but never found it.\n\nThis error occurred while creating the session. Because the session setup failed, we failed the test.\n\nBecause this error occurred during a `before each` hook we are skipping the remaining tests in the current suite: `Quote Management`",
                    "estack": "AssertionError: Timed out retrying after 10000ms: Expected to find element: `[data-cy=\"email-input\"]`, but never found it.\n\nThis error occurred while creating the session. Because the session setup failed, we failed the test.\n\nBecause this error occurred during a `before each` hook we are skipping the remaining tests in the current suite: `Quote Management`\n    at Object.eval [as setup] (webpack://conductores-pwa/./cypress/support/commands.ts:14:7)\n    at Context.<anonymous> (http://localhost:4200/__cypress/runner/cypress_runner.js:136587:38)\n    at getRet (http://localhost:4200/__cypress/runner/cypress_runner.js:120768:20)\n    at tryCatcher (http://localhost:4200/__cypress/runner/cypress_runner.js:1777:23)\n    at Promise.attempt.Promise.try (http://localhost:4200/__cypress/runner/cypress_runner.js:4285:29)\n    at Context.thenFn (http://localhost:4200/__cypress/runner/cypress_runner.js:120779:66)\n    at Context.then (http://localhost:4200/__cypress/runner/cypress_runner.js:121030:21)\n    at wrapped (http://localhost:4200/__cypress/runner/cypress_runner.js:141618:19)",
                    "diff": null
                  },
                  "uuid": "9ee217ec-fa3c-44b7-9932-cdcc57087fbe",
                  "parentUUID": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
                  "isHook": false,
                  "skipped": false
                },
                {
                  "title": "should create quote from client profile",
                  "fullTitle": "Quote Management Quote Creation Flow should create quote from client profile",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// Navigate from client details\ncy.visit('/clientes/client-001');\ncy.waitForAngular();\ncy.get('[data-cy=\"create-quote-button\"]').click();\n// Should pre-populate client information\ncy.url().should('include', '/cotizaciones/nueva');\ncy.url().should('include', 'clientId=client-001');\ncy.get('[data-cy=\"selected-client\"]').should('contain', 'Juan Pérez García');\ncy.get('[data-cy=\"client-info\"]').should('be.visible');",
                  "err": {},
                  "uuid": "877bfef7-5221-4e5c-bbe4-ce748905a5f2",
                  "parentUUID": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should validate required fields",
                  "fullTitle": "Quote Management Quote Creation Flow should validate required fields",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Try to proceed without selecting client\ncy.get('[data-cy=\"next-step\"]').click();\ncy.contains('Debe seleccionar un cliente').should('be.visible');\n// Select client and proceed\ncy.get('[data-cy=\"client-selector\"]').click();\ncy.get('[data-cy=\"client-option\"]').first().click();\ncy.get('[data-cy=\"next-step\"]').click();\n// Try to proceed without selecting product\ncy.get('[data-cy=\"next-step\"]').click();\ncy.contains('Debe seleccionar un producto').should('be.visible');",
                  "err": {},
                  "uuid": "62c92f84-34e6-4816-a0c3-0e88a7b1ae40",
                  "parentUUID": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should calculate payments correctly",
                  "fullTitle": "Quote Management Quote Creation Flow should calculate payments correctly",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Complete first two steps\ncy.get('[data-cy=\"client-selector\"]').click();\ncy.get('[data-cy=\"client-option\"]').first().click();\ncy.get('[data-cy=\"next-step\"]').click();\ncy.get('[data-cy=\"product-card\"]').first().click();\ncy.get('[data-cy=\"next-step\"]').click();\n// Test payment calculations\ncy.get('[data-cy=\"down-payment\"]').clear().type('100000');\n// Should update calculations immediately\ncy.get('[data-cy=\"financed-amount\"]').should('contain', '$150,000');\ncy.get('[data-cy=\"monthly-payment\"]').should('contain', '$');\n// Change payment terms\ncy.get('[data-cy=\"payment-terms\"]').select('60');\n// Monthly payment should decrease\ncy.get('[data-cy=\"monthly-payment\"]').then($payment => {\n    const payment60 = parseFloat($payment.text().replace(/[$,]/g, ''));\n    cy.get('[data-cy=\"payment-terms\"]').select('36');\n    cy.get('[data-cy=\"monthly-payment\"]').should($newPayment => {\n        const payment36 = parseFloat($newPayment.text().replace(/[$,]/g, ''));\n        expect(payment36).to.be.greaterThan(payment60);\n    });\n});",
                  "err": {},
                  "uuid": "b53d5d6c-7d63-4cc6-ba6b-baefc79a4eab",
                  "parentUUID": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should handle product configuration",
                  "fullTitle": "Quote Management Quote Creation Flow should handle product configuration",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Navigate to product selection\ncy.get('[data-cy=\"client-selector\"]').click();\ncy.get('[data-cy=\"client-option\"]').first().click();\ncy.get('[data-cy=\"next-step\"]').click();\n// Select product\ncy.get('[data-cy=\"product-card\"]').first().click();\n// Verify product configuration options appear\ncy.get('[data-cy=\"product-config\"]').should('be.visible');\n// Test different configurations affect price\ncy.get('[data-cy=\"base-price\"]').then($basePrice => {\n    const baseAmount = parseFloat($basePrice.text().replace(/[$,]/g, ''));\n    // Add premium features\n    cy.get('[data-cy=\"additional-features\"]').check(['GPS', 'seguro-extendido']);\n    cy.get('[data-cy=\"total-price\"]').should($totalPrice => {\n        const totalAmount = parseFloat($totalPrice.text().replace(/[$,]/g, ''));\n        expect(totalAmount).to.be.greaterThan(baseAmount);\n    });\n});",
                  "err": {},
                  "uuid": "7dea48aa-08cc-4f47-b03a-e778c3521342",
                  "parentUUID": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should save quote as draft",
                  "fullTitle": "Quote Management Quote Creation Flow should save quote as draft",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('POST', '**/api/quotes/draft', {\n    statusCode: 200,\n    body: {\n        id: 'draft-001',\n        status: 'draft',\n        savedAt: '2024-02-03T16:00:00Z'\n    }\n}).as('saveDraft');\ncy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Start filling form\ncy.get('[data-cy=\"client-selector\"]').click();\ncy.get('[data-cy=\"client-option\"]').first().click();\ncy.get('[data-cy=\"next-step\"]').click();\ncy.get('[data-cy=\"product-card\"]').first().click();\n// Save as draft\ncy.get('[data-cy=\"save-draft\"]').click();\ncy.wait('@saveDraft');\ncy.verifyToast('Borrador guardado', 'info');",
                  "err": {},
                  "uuid": "edd3ed00-3dc2-4415-8088-6bc4b244a796",
                  "parentUUID": "fbe31dcb-bf5b-426b-b5c1-a953d22f653f",
                  "isHook": false,
                  "skipped": true
                }
              ],
              "suites": [],
              "passes": [],
              "failures": [
                "9ee217ec-fa3c-44b7-9932-cdcc57087fbe"
              ],
              "pending": [],
              "skipped": [
                "877bfef7-5221-4e5c-bbe4-ce748905a5f2",
                "62c92f84-34e6-4816-a0c3-0e88a7b1ae40",
                "b53d5d6c-7d63-4cc6-ba6b-baefc79a4eab",
                "7dea48aa-08cc-4f47-b03a-e778c3521342",
                "edd3ed00-3dc2-4415-8088-6bc4b244a796"
              ],
              "duration": 10899,
              "root": false,
              "rootEmpty": false,
              "_timeout": 2000
            },
            {
              "uuid": "42eeaf23-da00-410f-9b7f-b190ab107c9a",
              "title": "Quote Management",
              "fullFile": "",
              "file": "",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should display quotes list correctly",
                  "fullTitle": "Quote Management Quote Management should display quotes list correctly",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones');\ncy.waitForAngular();\ncy.wait('@getQuotes');\ncy.get('[data-cy=\"quotes-page\"]').should('be.visible');\ncy.contains('Gestión de Cotizaciones').should('be.visible');\n// Verify quote cards\ncy.get('[data-cy=\"quote-card\"]').should('have.length.gte', 1);\ncy.get('[data-cy=\"quote-card\"]').first().within(() => {\n    cy.get('[data-cy=\"quote-number\"]').should('be.visible');\n    cy.get('[data-cy=\"client-name\"]').should('be.visible');\n    cy.get('[data-cy=\"quote-amount\"]').should('be.visible');\n    cy.get('[data-cy=\"quote-status\"]').should('be.visible');\n    cy.get('[data-cy=\"quote-date\"]').should('be.visible');\n});",
                  "err": {},
                  "uuid": "ae105efc-f4e5-4659-9730-0cbf746f1ada",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should filter quotes by status",
                  "fullTitle": "Quote Management Quote Management should filter quotes by status",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones');\ncy.waitForAngular();\ncy.wait('@getQuotes');\n// Filter by pending status\ncy.get('[data-cy=\"status-filter\"]').select('pending');\ncy.get('[data-cy=\"quote-card\"]').each($card => {\n    cy.wrap($card).find('[data-cy=\"quote-status\"]').should('contain', 'Pendiente');\n});\n// Filter by approved status\ncy.get('[data-cy=\"status-filter\"]').select('approved');\ncy.get('[data-cy=\"quote-card\"]').each($card => {\n    cy.wrap($card).find('[data-cy=\"quote-status\"]').should('contain', 'Aprobada');\n});",
                  "err": {},
                  "uuid": "c1b04d1d-45e3-431a-840d-d7fa3479d78e",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should search quotes by client name or quote number",
                  "fullTitle": "Quote Management Quote Management should search quotes by client name or quote number",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones');\ncy.waitForAngular();\ncy.wait('@getQuotes');\n// Search by client name\ncy.get('[data-cy=\"quote-search\"]').type('Juan Pérez');\ncy.get('[data-cy=\"quote-card\"]').should('have.length.gte', 1);\ncy.get('[data-cy=\"quote-card\"]').first().should('contain', 'Juan Pérez');\n// Clear and search by quote number\ncy.get('[data-cy=\"quote-search\"]').clear().type('COT-2024');\ncy.get('[data-cy=\"quote-card\"]').should('have.length.gte', 1);\ncy.get('[data-cy=\"quote-card\"]').each($card => {\n    cy.wrap($card).find('[data-cy=\"quote-number\"]').should('contain', 'COT-2024');\n});",
                  "err": {},
                  "uuid": "94bf5475-4633-4b67-9d0f-3b7c78444603",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should navigate to quote details",
                  "fullTitle": "Quote Management Quote Management should navigate to quote details",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones');\ncy.waitForAngular();\ncy.wait('@getQuotes');\ncy.get('[data-cy=\"quote-card\"]').first().click();\ncy.url().should('include', '/cotizaciones/');\ncy.get('[data-cy=\"quote-details\"]').should('be.visible');",
                  "err": {},
                  "uuid": "f2a18500-5e0f-44ca-905f-3fd12ce76d38",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                }
              ],
              "suites": [],
              "passes": [],
              "failures": [],
              "pending": [],
              "skipped": [
                "ae105efc-f4e5-4659-9730-0cbf746f1ada",
                "c1b04d1d-45e3-431a-840d-d7fa3479d78e",
                "94bf5475-4633-4b67-9d0f-3b7c78444603",
                "f2a18500-5e0f-44ca-905f-3fd12ce76d38"
              ],
              "duration": 0,
              "root": false,
              "rootEmpty": false,
              "_timeout": 2000
            },
            {
              "uuid": "0db64d36-54b2-42c3-9a89-f8fa7f0cbb78",
              "title": "Quote Details and Actions",
              "fullFile": "",
              "file": "",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should display quote details correctly",
                  "fullTitle": "Quote Management Quote Details and Actions should display quote details correctly",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\n// Verify quote header\ncy.get('[data-cy=\"quote-header\"]').should('be.visible');\ncy.get('[data-cy=\"quote-number\"]').should('contain', 'COT-2024-001');\ncy.get('[data-cy=\"quote-status\"]').should('be.visible');\ncy.get('[data-cy=\"quote-date\"]').should('be.visible');\n// Verify client information\ncy.get('[data-cy=\"client-info\"]').should('be.visible');\ncy.get('[data-cy=\"client-name\"]').should('contain', 'Juan Pérez García');\n// Verify product information\ncy.get('[data-cy=\"product-info\"]').should('be.visible');\ncy.get('[data-cy=\"product-name\"]').should('be.visible');\ncy.get('[data-cy=\"product-price\"]').should('be.visible');\n// Verify financing details\ncy.get('[data-cy=\"financing-info\"]').should('be.visible');\ncy.get('[data-cy=\"down-payment\"]').should('be.visible');\ncy.get('[data-cy=\"monthly-payment\"]').should('be.visible');\ncy.get('[data-cy=\"payment-terms\"]').should('be.visible');",
                  "err": {},
                  "uuid": "417b5674-52fa-4840-9aeb-402eb20ac2e9",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should approve quote successfully",
                  "fullTitle": "Quote Management Quote Details and Actions should approve quote successfully",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('PUT', '**/api/quotes/quote-001/approve', {\n    statusCode: 200,\n    body: { success: true, status: 'approved' }\n}).as('approveQuote');\ncy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\ncy.get('[data-cy=\"approve-quote\"]').click();\n// Confirm approval\ncy.get('[data-cy=\"approval-modal\"]').should('be.visible');\ncy.get('[data-cy=\"approval-notes\"]').type('Cotización aprobada con condiciones estándar');\ncy.get('[data-cy=\"confirm-approval\"]').click();\ncy.wait('@approveQuote');\ncy.verifyToast('Cotización aprobada exitosamente', 'success');\n// Status should update\ncy.get('[data-cy=\"quote-status\"]').should('contain', 'Aprobada');",
                  "err": {},
                  "uuid": "815db8b3-9539-4378-aa64-e07908f3a85f",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should reject quote with reason",
                  "fullTitle": "Quote Management Quote Details and Actions should reject quote with reason",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('PUT', '**/api/quotes/quote-001/reject', {\n    statusCode: 200,\n    body: { success: true, status: 'rejected' }\n}).as('rejectQuote');\ncy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\ncy.get('[data-cy=\"reject-quote\"]').click();\n// Provide rejection reason\ncy.get('[data-cy=\"rejection-modal\"]').should('be.visible');\ncy.get('[data-cy=\"rejection-reason\"]').select('credit-issues');\ncy.get('[data-cy=\"rejection-notes\"]').type('Documentos de crédito incompletos');\ncy.get('[data-cy=\"confirm-rejection\"]').click();\ncy.wait('@rejectQuote');\ncy.verifyToast('Cotización rechazada', 'info');\n// Status should update\ncy.get('[data-cy=\"quote-status\"]').should('contain', 'Rechazada');",
                  "err": {},
                  "uuid": "da922a40-988d-496e-a1e6-9e57d2d4d092",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should edit quote details",
                  "fullTitle": "Quote Management Quote Details and Actions should edit quote details",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('PUT', '**/api/quotes/quote-001', {\n    statusCode: 200,\n    body: { success: true }\n}).as('updateQuote');\ncy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\ncy.get('[data-cy=\"edit-quote\"]').click();\n// Should navigate to edit mode\ncy.url().should('include', '/editar');\n// Modify financing terms\ncy.get('[data-cy=\"down-payment\"]').clear().type('75000');\ncy.get('[data-cy=\"payment-terms\"]').select('60');\n// Verify calculations update\ncy.get('[data-cy=\"monthly-payment\"]').should('be.visible');\ncy.get('[data-cy=\"save-changes\"]').click();\ncy.wait('@updateQuote');\ncy.verifyToast('Cotización actualizada', 'success');",
                  "err": {},
                  "uuid": "2ed9c7ba-0e7c-40da-a419-6346060cee2d",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should generate quote PDF",
                  "fullTitle": "Quote Management Quote Details and Actions should generate quote PDF",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('GET', '**/api/quotes/quote-001/pdf', {\n    statusCode: 200,\n    headers: {\n        'Content-Type': 'application/pdf',\n        'Content-Disposition': 'attachment; filename=\"COT-2024-001.pdf\"'\n    }\n}).as('generatePDF');\ncy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\ncy.get('[data-cy=\"download-pdf\"]').click();\ncy.wait('@generatePDF');\ncy.verifyToast('PDF generado exitosamente', 'success');",
                  "err": {},
                  "uuid": "d6446abf-59d1-4314-adfb-dbaf9220921f",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should send quote via email",
                  "fullTitle": "Quote Management Quote Details and Actions should send quote via email",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('POST', '**/api/quotes/quote-001/send-email', {\n    statusCode: 200,\n    body: { success: true, sent: true }\n}).as('sendQuoteEmail');\ncy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\ncy.get('[data-cy=\"send-email\"]').click();\ncy.get('[data-cy=\"email-modal\"]').should('be.visible');\ncy.get('[data-cy=\"recipient-email\"]').should('have.value', 'juan.perez@email.com');\ncy.get('[data-cy=\"email-subject\"]').should('contain', 'Cotización COT-2024-001');\ncy.get('[data-cy=\"email-message\"]').type('Estimado cliente, adjunto encuentra su cotización...');\ncy.get('[data-cy=\"send-email-confirm\"]').click();\ncy.wait('@sendQuoteEmail');\ncy.verifyToast('Cotización enviada por correo', 'success');",
                  "err": {},
                  "uuid": "7de016f7-710f-44da-98e9-b579365660e2",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should convert quote to contract",
                  "fullTitle": "Quote Management Quote Details and Actions should convert quote to contract",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('POST', '**/api/quotes/quote-001/convert-contract', {\n    statusCode: 200,\n    body: {\n        success: true,\n        contractId: 'contract-001',\n        contractNumber: 'CONT-2024-001'\n    }\n}).as('convertToContract');\ncy.visit('/cotizaciones/quote-001');\ncy.waitForAngular();\ncy.wait('@getQuoteDetails');\n// Quote must be approved first\ncy.get('[data-cy=\"quote-status\"]').should('contain', 'Aprobada');\ncy.get('[data-cy=\"convert-contract\"]').click();\ncy.get('[data-cy=\"contract-modal\"]').should('be.visible');\ncy.get('[data-cy=\"contract-terms\"]').check();\ncy.get('[data-cy=\"confirm-conversion\"]').click();\ncy.wait('@convertToContract');\ncy.verifyToast('Contrato creado exitosamente', 'success');\n// Should redirect to contract details\ncy.url().should('include', '/contratos/contract-001');",
                  "err": {},
                  "uuid": "2f39f3ea-119f-48db-9257-fb9ab4fbda07",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                }
              ],
              "suites": [],
              "passes": [],
              "failures": [],
              "pending": [],
              "skipped": [
                "417b5674-52fa-4840-9aeb-402eb20ac2e9",
                "815db8b3-9539-4378-aa64-e07908f3a85f",
                "da922a40-988d-496e-a1e6-9e57d2d4d092",
                "2ed9c7ba-0e7c-40da-a419-6346060cee2d",
                "d6446abf-59d1-4314-adfb-dbaf9220921f",
                "7de016f7-710f-44da-98e9-b579365660e2",
                "2f39f3ea-119f-48db-9257-fb9ab4fbda07"
              ],
              "duration": 0,
              "root": false,
              "rootEmpty": false,
              "_timeout": 2000
            },
            {
              "uuid": "66fc7b5c-46f0-40c2-930c-30db9ad1996b",
              "title": "Quote Comparison",
              "fullFile": "",
              "file": "",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should compare multiple quotes",
                  "fullTitle": "Quote Management Quote Comparison should compare multiple quotes",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones');\ncy.waitForAngular();\ncy.wait('@getQuotes');\n// Select quotes for comparison\ncy.get('[data-cy=\"quote-compare\"]').first().check();\ncy.get('[data-cy=\"quote-compare\"]').eq(1).check();\ncy.get('[data-cy=\"compare-quotes\"]').click();\n// Verify comparison view\ncy.get('[data-cy=\"comparison-table\"]').should('be.visible');\ncy.get('[data-cy=\"comparison-header\"]').should('contain', '2 cotizaciones seleccionadas');\n// Verify comparison fields\ncy.get('[data-cy=\"compare-client\"]').should('be.visible');\ncy.get('[data-cy=\"compare-product\"]').should('be.visible');\ncy.get('[data-cy=\"compare-pricing\"]').should('be.visible');\ncy.get('[data-cy=\"compare-financing\"]').should('be.visible');",
                  "err": {},
                  "uuid": "79958871-ff8d-44de-8bd3-b7260fc13c78",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should export comparison report",
                  "fullTitle": "Quote Management Quote Comparison should export comparison report",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.intercept('POST', '**/api/quotes/comparison-report', {\n    statusCode: 200,\n    body: { downloadUrl: '/downloads/quote-comparison.pdf' }\n}).as('exportComparison');\ncy.visit('/cotizaciones/comparacion?ids=quote-001,quote-002');\ncy.waitForAngular();\ncy.get('[data-cy=\"export-comparison\"]').click();\ncy.wait('@exportComparison');\ncy.verifyToast('Reporte de comparación generado', 'success');",
                  "err": {},
                  "uuid": "984cdb5c-ebac-4248-8d4a-5c86a2b6684e",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                }
              ],
              "suites": [],
              "passes": [],
              "failures": [],
              "pending": [],
              "skipped": [
                "79958871-ff8d-44de-8bd3-b7260fc13c78",
                "984cdb5c-ebac-4248-8d4a-5c86a2b6684e"
              ],
              "duration": 0,
              "root": false,
              "rootEmpty": false,
              "_timeout": 2000
            },
            {
              "uuid": "1f2dfb01-193d-435d-a997-c5f249ea9287",
              "title": "Performance and Accessibility",
              "fullFile": "",
              "file": "",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should load quote creation form efficiently",
                  "fullTitle": "Quote Management Performance and Accessibility should load quote creation form efficiently",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "const start = Date.now();\ncy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\ncy.wait('@getProducts');\ncy.then(() => {\n    const loadTime = Date.now() - start;\n    expect(loadTime).to.be.lessThan(3000);\n});",
                  "err": {},
                  "uuid": "8483a9ae-8c78-4fb2-91e9-ab399fc05727",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should be fully accessible",
                  "fullTitle": "Quote Management Performance and Accessibility should be fully accessible",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones');\ncy.waitForAngular();\ncy.wait('@getQuotes');\ncy.checkA11y();\n// Test form accessibility\ncy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\ncy.checkA11y('[data-cy=\"quote-form\"]');",
                  "err": {},
                  "uuid": "9f824cb8-133c-4f05-9e5e-70dbef054cf2",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should handle form validation accessibly",
                  "fullTitle": "Quote Management Performance and Accessibility should handle form validation accessibly",
                  "timedOut": null,
                  "duration": 0,
                  "state": "skipped",
                  "speed": null,
                  "pass": false,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Trigger validation\ncy.get('[data-cy=\"next-step\"]').click();\n// Verify ARIA attributes\ncy.get('[data-cy=\"client-selector\"]').should('have.attr', 'aria-invalid', 'true');\ncy.get('[data-cy=\"client-error\"]').should('have.attr', 'role', 'alert');",
                  "err": {},
                  "uuid": "41fcd8e9-e813-481a-b44d-1c926a969881",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": true
                },
                {
                  "title": "should support keyboard navigation through quote form",
                  "fullTitle": "Quote Management Performance and Accessibility should support keyboard navigation through quote form",
                  "timedOut": null,
                  "duration": 0,
                  "state": "failed",
                  "speed": null,
                  "pass": false,
                  "fail": true,
                  "pending": false,
                  "context": null,
                  "code": "cy.visit('/cotizaciones/nueva');\ncy.waitForAngular();\n// Test tab navigation\ncy.get('body').tab();\ncy.focused().should('be.visible');\n// Navigate through form fields\nfor (let i = 0; i < 10; i++) {\n    cy.focused().tab();\n    cy.focused().should('be.visible');\n}\n// Test Enter key on buttons\ncy.get('[data-cy=\"client-selector\"]').focus().type('{enter}');\ncy.get('[data-cy=\"client-dropdown\"]').should('be.visible');",
                  "err": {
                    "message": "CypressError: `cy.task('coverageReport')` failed with the following error:\n\n> Command failed with exit code 1: npm run coverage:report\n\nhttps://on.cypress.io/api/task\n\nBecause this error occurred during a `after all` hook we are skipping all of the remaining tests.\n\nAlthough you have test retries enabled, we do not retry tests when `before all` or `after all` hooks fail",
                    "estack": "CypressError: `cy.task('coverageReport')` failed with the following error:\n\n> Command failed with exit code 1: npm run coverage:report\n\nhttps://on.cypress.io/api/task\n\nBecause this error occurred during a `after all` hook we are skipping all of the remaining tests.\n\nAlthough you have test retries enabled, we do not retry tests when `before all` or `after all` hooks fail\n    at <unknown> (http://localhost:4200/__cypress/runner/cypress_runner.js:138627:70)\n    at tryCatcher (http://localhost:4200/__cypress/runner/cypress_runner.js:1777:23)\n    at Promise._settlePromiseFromHandler (http://localhost:4200/__cypress/runner/cypress_runner.js:1489:31)\n    at Promise._settlePromise (http://localhost:4200/__cypress/runner/cypress_runner.js:1546:18)\n    at Promise._settlePromise0 (http://localhost:4200/__cypress/runner/cypress_runner.js:1591:10)\n    at Promise._settlePromises (http://localhost:4200/__cypress/runner/cypress_runner.js:1667:18)\n    at _drainQueueStep (http://localhost:4200/__cypress/runner/cypress_runner.js:2377:12)\n    at _drainQueue (http://localhost:4200/__cypress/runner/cypress_runner.js:2370:9)\n    at Async._drainQueues (http://localhost:4200/__cypress/runner/cypress_runner.js:2386:5)\n    at Async.drainQueues (http://localhost:4200/__cypress/runner/cypress_runner.js:2256:14)\nFrom Your Spec Code:\n    at Context.generateReport (webpack://conductores-pwa/./node_modules/@cypress/code-coverage/support.js:263:0)\n\nFrom Node.js Internals:\n  Error: Command failed with exit code 1: npm run coverage:report\n      at makeError (/workspace/node_modules/@cypress/code-coverage/node_modules/execa/lib/error.js:59:11)\n      at handlePromise (/workspace/node_modules/@cypress/code-coverage/node_modules/execa/index.js:114:26)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)",
                    "diff": null
                  },
                  "uuid": "f84b9b47-c13d-4c65-be7f-f34d8f360d6b",
                  "parentUUID": null,
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [],
              "passes": [],
              "failures": [
                "f84b9b47-c13d-4c65-be7f-f34d8f360d6b"
              ],
              "pending": [],
              "skipped": [
                "8483a9ae-8c78-4fb2-91e9-ab399fc05727",
                "9f824cb8-133c-4f05-9e5e-70dbef054cf2",
                "41fcd8e9-e813-481a-b44d-1c926a969881"
              ],
              "duration": 0,
              "root": false,
              "rootEmpty": false,
              "_timeout": 2000
            }
          ],
          "passes": [],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 0,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.2.0"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": false,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.3"
    },
    "marge": {
      "options": {
        "id": "default",
        "charts": true,
        "reportPageTitle": "Conductores PWA E2E Tests",
        "embeddedScreenshots": true,
        "inlineAssets": true,
        "saveAllAttempts": false,
        "reportDir": "cypress/reports/html/.jsons",
        "overwrite": false,
        "html": false,
        "json": true
      },
      "version": "6.2.0"
    }
  }
}