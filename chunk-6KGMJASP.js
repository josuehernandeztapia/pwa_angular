import{a as X,b as S,c as G}from"./chunk-4M7CYCOE.js";import{k as R,n as z,p as F}from"./chunk-SCHFUJ5K.js";import{a as U}from"./chunk-YYSQDTD3.js";import{b as W,d as j,g as q,u as B}from"./chunk-S2UEMBMO.js";import{$ as E,Ea as o,I as D,Kb as A,Ma as C,Sa as v,Ua as c,Va as P,Wa as O,Xa as I,Xb as V,Ya as i,Yb as N,Za as t,_a as M,bb as x,bc as L,cb as f,db as d,ea as w,ib as a,jb as m,kb as u,lb as k,ma as _,na as g,ob as y,pb as b,qb as h,sb as T}from"./chunk-5IDTUAMZ.js";import"./chunk-DM275RSA.js";function H(n,s){if(n&1&&(i(0,"h1",12),a(1),t()),n&2){let e=d();o(),u(" \u{1F4E6} Entrega ",e.delivery().id," ")}}function K(n,s){if(n&1&&(i(0,"div",13)(1,"span",14),a(2),t(),i(3,"span",15),a(4),t()()),n&2){let e=d();o(),P("background-color",e.getStatusColor(e.delivery().status)),o(),k(" ",e.getStatusIcon(e.delivery().status)," ",e.getStatusTitle(e.delivery().status)," "),o(2),u("",e.getProgress(e.delivery().status),"% completado")}}function $(n,s){if(n&1){let e=x();i(0,"button",16),f("click",function(){_(e);let r=d();return g(r.showAdvanceModal())}),a(1," \u23ED\uFE0F Avanzar Estado "),t()}}function J(n,s){n&1&&(i(0,"div",17),M(1,"div",18),i(2,"p"),a(3,"Cargando detalles de la entrega..."),t()())}function Q(n,s){if(n&1&&(i(0,"div",25)(1,"span",26),a(2,"Ruta:"),t(),i(3,"span",27),a(4),t()()),n&2){let e=d(2);o(4),m(e.delivery().route.name)}}function Z(n,s){if(n&1&&(i(0,"div",25)(1,"span",26),a(2,"Monto:"),t(),i(3,"span",27),a(4),t()()),n&2){let e=d(2);o(4),m(e.formatCurrency(e.delivery().contract.amount))}}function ee(n,s){if(n&1&&(i(0,"div",25)(1,"span",26),a(2,"D\xEDas reales:"),t(),i(3,"span",27),a(4),t()()),n&2){let e=d(2);o(4),m(e.delivery().actualTransitDays)}}function te(n,s){if(n&1&&(i(0,"div",25)(1,"span",26),a(2,"Contenedor:"),t(),i(3,"span",27),a(4),t()()),n&2){let e=d(3);o(4),m(e.delivery().containerNumber)}}function ne(n,s){if(n&1&&(i(0,"div",25)(1,"span",26),a(2,"Bill of Lading:"),t(),i(3,"span",27),a(4),t()()),n&2){let e=d(3);o(4),m(e.delivery().billOfLading)}}function ie(n,s){if(n&1&&(i(0,"div",22)(1,"div",23)(2,"h3"),a(3,"\u{1F6A2} Env\xEDo"),t()(),i(4,"div",24),v(5,te,5,1,"div",28)(6,ne,5,1,"div",28),t()()),n&2){let e=d(2);o(5),c("ngIf",e.delivery().containerNumber),o(),c("ngIf",e.delivery().billOfLading)}}function oe(n,s){n&1&&(i(0,"div",41),M(1,"div",42),i(2,"span"),a(3,"Cargando eventos..."),t()())}function ae(n,s){n&1&&M(0,"div",56)}function re(n,s){if(n&1&&(i(0,"div",60)(1,"span",61),a(2,"Ejecutado por:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.actorName)}}function le(n,s){if(n&1&&(i(0,"div",60)(1,"span",61),a(2,"Contenedor:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.meta==null?null:e.meta.containerNumber)}}function de(n,s){if(n&1&&(i(0,"div",60)(1,"span",61),a(2,"Puerto:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.meta==null?null:e.meta.portName)}}function ce(n,s){if(n&1&&(i(0,"div",60)(1,"span",61),a(2,"Embarcaci\xF3n:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.meta==null?null:e.meta.vesselName)}}function se(n,s){if(n&1&&(i(0,"div",60)(1,"span",61),a(2,"Ref. Aduanal:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.meta==null?null:e.meta.customsReference)}}function me(n,s){if(n&1&&(i(0,"div",60)(1,"span",61),a(2,"Bodega:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.meta==null?null:e.meta.warehouseLocation)}}function pe(n,s){if(n&1&&(i(0,"div",63)(1,"span",61),a(2,"Notas:"),t(),i(3,"span",62),a(4),t()()),n&2){let e=d(2).$implicit;o(4),m(e.meta==null?null:e.meta.notes)}}function ve(n,s){if(n&1&&(i(0,"div",57),v(1,re,5,1,"div",58)(2,le,5,1,"div",58)(3,de,5,1,"div",58)(4,ce,5,1,"div",58)(5,se,5,1,"div",58)(6,me,5,1,"div",58)(7,pe,5,1,"div",59),t()),n&2){let e=d().$implicit;o(),c("ngIf",e.actorName),o(),c("ngIf",e.meta==null?null:e.meta.containerNumber),o(),c("ngIf",e.meta==null?null:e.meta.portName),o(),c("ngIf",e.meta==null?null:e.meta.vesselName),o(),c("ngIf",e.meta==null?null:e.meta.customsReference),o(),c("ngIf",e.meta==null?null:e.meta.warehouseLocation),o(),c("ngIf",e.meta==null?null:e.meta.notes)}}function _e(n,s){if(n&1&&(i(0,"div",46)(1,"div",47)(2,"div",48),a(3),t(),v(4,ae,1,0,"div",49),t(),i(5,"div",50)(6,"div",51)(7,"h4",52),a(8),t(),i(9,"span",53),a(10),t()(),i(11,"p",54),a(12),t(),v(13,ve,8,7,"div",55),t()()),n&2){let e=s.$implicit,l=d(3);o(2),I("event-"+e.event.toLowerCase()),o(),u(" ",l.getEventIcon(e.event)," "),o(),c("ngIf",!l.isLastEvent(e)),o(4),m(l.getEventTitle(e.event)),o(2),m(l.formatEventTime(e.at)),o(2),m(l.getEventDescription(e.event)),o(),c("ngIf",e.meta||e.actorName)}}function ge(n,s){n&1&&(i(0,"div",64)(1,"p"),a(2,"No hay eventos registrados a\xFAn."),t()())}function xe(n,s){if(n&1&&(i(0,"div",43),v(1,_e,14,8,"div",44)(2,ge,3,0,"div",45),t()),n&2){let e=d(2);o(),c("ngForOf",e.events())("ngForTrackBy",e.trackEvent),o(),c("ngIf",e.events().length===0)}}function ue(n,s){if(n&1){let e=x();i(0,"div",68)(1,"div",69)(2,"h4"),a(3),t(),i(4,"p"),a(5),t()(),i(6,"button",70),f("click",function(){let r=_(e).$implicit,p=d(3);return g(p.executeAction(r.event))}),a(7," Ejecutar "),t()()}if(n&2){let e=s.$implicit;o(3),m(e.label),o(2),m(e.description),o(),O("requires-confirmation",e.requiresConfirmation)}}function fe(n,s){if(n&1&&(i(0,"div",65)(1,"h3"),a(2,"\u26A1 Acciones Disponibles"),t(),i(3,"div",66),v(4,ue,8,4,"div",67),t()()),n&2){let e=d(2);o(4),c("ngForOf",e.availableActions())}}function Ce(n,s){if(n&1){let e=x();i(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"h3"),a(6,"\u{1F464} Cliente"),t()(),i(7,"div",24)(8,"div",25)(9,"span",26),a(10,"Nombre:"),t(),i(11,"span",27),a(12),t()(),i(13,"div",25)(14,"span",26),a(15,"ID:"),t(),i(16,"span",27),a(17),t()(),i(18,"div",25)(19,"span",26),a(20,"Mercado:"),t(),i(21,"span",27),a(22),t()(),v(23,Q,5,1,"div",28),t()(),i(24,"div",22)(25,"div",23)(26,"h3"),a(27,"\u{1F4CB} Pedido"),t()(),i(28,"div",24)(29,"div",25)(30,"span",26),a(31,"Contrato:"),t(),i(32,"span",27),a(33),t()(),i(34,"div",25)(35,"span",26),a(36,"SKU:"),t(),i(37,"span",27),a(38),t()(),i(39,"div",25)(40,"span",26),a(41,"Cantidad:"),t(),i(42,"span",27),a(43),t()(),v(44,Z,5,1,"div",28),t()(),i(45,"div",22)(46,"div",23)(47,"h3"),a(48,"\u23F0 Tiempos"),t()(),i(49,"div",24)(50,"div",25)(51,"span",26),a(52,"Creado:"),t(),i(53,"span",27),a(54),t()(),i(55,"div",25)(56,"span",26),a(57,"ETA:"),t(),i(58,"span",27),a(59),t()(),i(60,"div",25)(61,"span",26),a(62,"D\xEDas estimados:"),t(),i(63,"span",27),a(64),t()(),v(65,ee,5,1,"div",28),t()(),v(66,ie,7,2,"div",29),t()(),i(67,"div",30)(68,"h3"),a(69,"\u{1F4C8} Progreso de Entrega"),t(),i(70,"div",31)(71,"div",32),M(72,"div",33),t(),i(73,"div",34)(74,"span"),a(75,"Inicio"),t(),i(76,"span"),a(77),t(),i(78,"span"),a(79,"Completado"),t()()()(),i(80,"div",35)(81,"div",36)(82,"h3"),a(83,"\u{1F4C5} L\xEDnea de Tiempo"),t(),i(84,"button",37),f("click",function(){_(e);let r=d();return g(r.loadEvents())}),a(85),t()(),v(86,oe,4,0,"div",38)(87,xe,3,3,"div",39),t(),v(88,fe,5,1,"div",40),t()}if(n&2){let e=d();o(12),m(e.delivery().client.name),o(5),m(e.delivery().client.id),o(5),m(e.getMarketName(e.delivery().market)),o(),c("ngIf",e.delivery().route),o(10),m(e.delivery().contract.id),o(5),m(e.delivery().sku),o(5),m(e.delivery().qty),o(),c("ngIf",e.delivery().contract.amount),o(10),m(e.formatDate(e.delivery().createdAt)),o(4),O("overdue",e.isOverdue(e.delivery().eta)),o(),u(" ",e.formatETA(e.delivery().eta)," "),o(5),m(e.delivery().estimatedTransitDays),o(),c("ngIf",e.delivery().actualTransitDays),o(),c("ngIf",e.hasShippingInfo()),o(6),P("width",e.getProgress(e.delivery().status),"%"),o(5),u("",e.getProgress(e.delivery().status),"%"),o(7),c("disabled",e.eventsLoading()),o(),u(" ",e.eventsLoading()?"\u23F3":"\u{1F504}"," Actualizar Timeline "),o(),c("ngIf",e.eventsLoading()),o(),c("ngIf",!e.eventsLoading()),o(),c("ngIf",e.availableActions().length>0)}}function ye(n,s){if(n&1&&(i(0,"div",84)(1,"p")(2,"strong"),a(3,"Pedido:"),t(),a(4),t(),i(5,"p")(6,"strong"),a(7,"Estado actual:"),t(),a(8),t()()),n&2){let e=d(2);o(4),u(" ",e.delivery().id,""),o(4),u(" ",e.getStatusTitle(e.delivery().status),"")}}function be(n,s){if(n&1){let e=x();i(0,"div",85)(1,"button",86),f("click",function(){let r=_(e).$implicit,p=d(2);return g(p.selectAction(r.event))}),a(2),t(),i(3,"span",87),a(4),t()()}if(n&2){let e=s.$implicit;o(2),u(" ",e.label," "),o(2),m(e.description)}}function he(n,s){if(n&1){let e=x();i(0,"div",91)(1,"label"),a(2,"N\xFAmero de contenedor:"),t(),i(3,"input",93),h("ngModelChange",function(r){_(e);let p=d(3);return b(p.actionMeta.containerNumber,r)||(p.actionMeta.containerNumber=r),g(r)}),t()()}if(n&2){let e=d(3);o(3),y("ngModel",e.actionMeta.containerNumber)}}function Me(n,s){if(n&1){let e=x();i(0,"div",91)(1,"label"),a(2,"Puerto:"),t(),i(3,"input",94),h("ngModelChange",function(r){_(e);let p=d(3);return b(p.actionMeta.portName,r)||(p.actionMeta.portName=r),g(r)}),t()()}if(n&2){let e=d(3);o(3),y("ngModel",e.actionMeta.portName)}}function De(n,s){if(n&1){let e=x();i(0,"div",91)(1,"label"),a(2,"Nombre de embarcaci\xF3n:"),t(),i(3,"input",95),h("ngModelChange",function(r){_(e);let p=d(3);return b(p.actionMeta.vesselName,r)||(p.actionMeta.vesselName=r),g(r)}),t()()}if(n&2){let e=d(3);o(3),y("ngModel",e.actionMeta.vesselName)}}function Ee(n,s){if(n&1){let e=x();i(0,"div",91)(1,"label"),a(2,"Referencia aduanal:"),t(),i(3,"input",96),h("ngModelChange",function(r){_(e);let p=d(3);return b(p.actionMeta.customsReference,r)||(p.actionMeta.customsReference=r),g(r)}),t()()}if(n&2){let e=d(3);o(3),y("ngModel",e.actionMeta.customsReference)}}function Se(n,s){if(n&1){let e=x();i(0,"div",91)(1,"label"),a(2,"Ubicaci\xF3n de bodega:"),t(),i(3,"input",97),h("ngModelChange",function(r){_(e);let p=d(3);return b(p.actionMeta.warehouseLocation,r)||(p.actionMeta.warehouseLocation=r),g(r)}),t()()}if(n&2){let e=d(3);o(3),y("ngModel",e.actionMeta.warehouseLocation)}}function Pe(n,s){if(n&1){let e=x();i(0,"div",88)(1,"h4"),a(2),t(),i(3,"div",89),v(4,he,4,1,"div",90)(5,Me,4,1,"div",90)(6,De,4,1,"div",90)(7,Ee,4,1,"div",90)(8,Se,4,1,"div",90),i(9,"div",91)(10,"label"),a(11,"Notas (opcional):"),t(),i(12,"textarea",92),h("ngModelChange",function(r){_(e);let p=d(2);return b(p.actionMeta.notes,r)||(p.actionMeta.notes=r),g(r)}),t()()()()}if(n&2){let e=d(2);o(2),m(e.getActionLabel(e.selectedAction())),o(2),c("ngIf",e.requiresContainerNumber(e.selectedAction())),o(),c("ngIf",e.requiresPortName(e.selectedAction())),o(),c("ngIf",e.requiresVesselName(e.selectedAction())),o(),c("ngIf",e.requiresCustomsRef(e.selectedAction())),o(),c("ngIf",e.requiresWarehouseLocation(e.selectedAction())),o(4),y("ngModel",e.actionMeta.notes)}}function Oe(n,s){if(n&1){let e=x();i(0,"div",71),f("click",function(){_(e);let r=d();return g(r.hideAdvanceModal())}),i(1,"div",72),f("click",function(r){return _(e),g(r.stopPropagation())}),i(2,"div",73)(3,"h3"),a(4,"Avanzar Estado de Entrega"),t(),i(5,"button",74),f("click",function(){_(e);let r=d();return g(r.hideAdvanceModal())}),a(6,"\xD7"),t()(),i(7,"div",75),v(8,ye,9,2,"div",76),i(9,"div",77)(10,"h4"),a(11,"Selecciona la acci\xF3n a realizar:"),t(),i(12,"div",78),v(13,be,5,2,"div",79),t()(),v(14,Pe,13,7,"div",80),t(),i(15,"div",81)(16,"button",82),f("click",function(){_(e);let r=d();return g(r.hideAdvanceModal())}),a(17,"Cancelar"),t(),i(18,"button",83),f("click",function(){_(e);let r=d();return g(r.confirmAction())}),a(19),t()()()()}if(n&2){let e=d();o(8),c("ngIf",e.delivery()),o(5),c("ngForOf",e.availableActions()),o(),c("ngIf",e.selectedAction()),o(4),c("disabled",!e.selectedAction()||e.submitting()),o(),u(" ",e.submitting()?"Procesando...":"Confirmar"," ")}}var qe=(()=>{class n{constructor(){this.deliveriesService=E(G),this.toastService=E(U),this.route=E(R),this.delivery=C(null),this.events=C([]),this.loading=C(!1),this.eventsLoading=C(!1),this.showAdvanceStateModal=C(!1),this.selectedAction=C(null),this.submitting=C(!1),this.actionMeta={containerNumber:"",portName:"",vesselName:"",customsReference:"",warehouseLocation:"",notes:""},this.availableActions=A(()=>{let e=this.delivery();return e?this.deliveriesService.getAvailableActions(e,"ops"):[]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.loadDelivery(e),this.loadEvents())}loadDelivery(e){this.loading.set(!0),this.deliveriesService.get(e).pipe(D(()=>this.loading.set(!1))).subscribe({next:l=>{this.delivery.set(l)},error:l=>{this.toastService.error(l.userMessage||"Error cargando entrega")}})}loadEvents(){let e=this.delivery();e&&(this.eventsLoading.set(!0),this.deliveriesService.events(e.id).pipe(D(()=>this.eventsLoading.set(!1))).subscribe({next:l=>{let r=l.sort((p,Y)=>new Date(Y.at).getTime()-new Date(p.at).getTime());this.events.set(r)},error:l=>{this.toastService.error("Error cargando eventos")}}))}refreshData(){let e=this.delivery();e&&(this.loadDelivery(e.id),this.loadEvents())}showAdvanceModal(){this.showAdvanceStateModal.set(!0)}hideAdvanceModal(){this.showAdvanceStateModal.set(!1),this.selectedAction.set(null),this.resetActionMeta()}selectAction(e){this.selectedAction.set(e)}executeAction(e){this.selectAction(e),this.confirmAction()}confirmAction(){let e=this.delivery(),l=this.selectedAction();!e||!l||(this.submitting.set(!0),this.deliveriesService.transition(e.id,{event:l,meta:this.actionMeta,notes:this.actionMeta.notes}).pipe(D(()=>this.submitting.set(!1))).subscribe({next:r=>{r.success?(this.toastService.success(r.message),this.hideAdvanceModal(),this.refreshData()):this.toastService.error(r.message)},error:r=>{this.toastService.error(r.userMessage||"Error ejecutando acci\xF3n")}}))}resetActionMeta(){this.actionMeta={containerNumber:"",portName:"",vesselName:"",customsReference:"",warehouseLocation:"",notes:""}}canAdvanceStatus(){return this.availableActions().length>0}hasShippingInfo(){let e=this.delivery();return!!(e?.containerNumber||e?.billOfLading)}isLastEvent(e){let l=this.events();return l.indexOf(e)===l.length-1}getMarketName(e){return e==="AGS"?"Aguascalientes":"Estado de M\xE9xico"}getStatusTitle(e){return X[e]?.title||e}getStatusColor(e){return this.deliveriesService.getStatusColor(e)}getStatusIcon(e){return this.deliveriesService.getStatusIcon(e)}getProgress(e){return this.deliveriesService.getDeliveryProgress(e)}getEventTitle(e){return S[e]?.title||e}getEventDescription(e){return S[e]?.description||""}getEventIcon(e){return S[e]?.icon||"\u{1F4E6}"}getActionLabel(e){let l=this.availableActions().find(r=>r.event===e);return l?l.label:e}formatDate(e){return new Intl.DateTimeFormat("es-MX",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}formatETA(e){return e?new Intl.DateTimeFormat("es-MX",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e)):"Por definir"}formatEventTime(e){return new Intl.DateTimeFormat("es-MX",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}formatCurrency(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e)}isOverdue(e){return e?new Date(e)<new Date:!1}requiresContainerNumber(e){return["LOAD_ORIGIN","DEPART_VESSEL","ARRIVE_DEST"].includes(e)}requiresPortName(e){return["LOAD_ORIGIN","ARRIVE_DEST"].includes(e)}requiresVesselName(e){return["DEPART_VESSEL","ARRIVE_DEST"].includes(e)}requiresCustomsRef(e){return["CUSTOMS_CLEAR","RELEASE"].includes(e)}requiresWarehouseLocation(e){return["ARRIVE_WH"].includes(e)}trackEvent(e,l){return l.id}static{this.\u0275fac=function(l){return new(l||n)}}static{this.\u0275cmp=w({type:n,selectors:[["app-delivery-detail"]],standalone:!0,features:[T],decls:14,vars:8,consts:[[1,"delivery-detail-container"],[1,"detail-header"],[1,"header-content"],["routerLink","/ops/deliveries",1,"btn-back"],["class","page-title",4,"ngIf"],["class","status-info",4,"ngIf"],[1,"header-actions"],[1,"btn-refresh",3,"click","disabled"],["class","btn-advance",3,"click",4,"ngIf"],["class","loading-overlay",4,"ngIf"],["class","detail-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"page-title"],[1,"status-info"],[1,"status-badge"],[1,"progress-text"],[1,"btn-advance",3,"click"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"detail-content"],[1,"overview-section"],[1,"overview-cards"],[1,"info-card"],[1,"card-header"],[1,"card-content"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","info-item",4,"ngIf"],["class","info-card",4,"ngIf"],[1,"progress-section"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-labels"],[1,"timeline-section"],[1,"timeline-header"],[1,"btn-refresh-timeline",3,"click","disabled"],["class","timeline-loading",4,"ngIf"],["class","timeline",4,"ngIf"],["class","actions-section",4,"ngIf"],[1,"timeline-loading"],[1,"loading-spinner","small"],[1,"timeline"],["class","timeline-item",4,"ngFor","ngForOf","ngForTrackBy"],["class","timeline-empty",4,"ngIf"],[1,"timeline-item"],[1,"timeline-marker"],[1,"timeline-dot"],["class","timeline-line",4,"ngIf"],[1,"timeline-content"],[1,"event-header"],[1,"event-title"],[1,"event-time"],[1,"event-description"],["class","event-meta",4,"ngIf"],[1,"timeline-line"],[1,"event-meta"],["class","meta-item",4,"ngIf"],["class","meta-item full-width",4,"ngIf"],[1,"meta-item"],[1,"meta-label"],[1,"meta-value"],[1,"meta-item","full-width"],[1,"timeline-empty"],[1,"actions-section"],[1,"actions-grid"],["class","action-card",4,"ngFor","ngForOf"],[1,"action-card"],[1,"action-info"],[1,"btn-action",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],["class","current-status",4,"ngIf"],[1,"action-selection"],[1,"action-options"],["class","action-option",4,"ngFor","ngForOf"],["class","action-form",4,"ngIf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"current-status"],[1,"action-option"],[1,"btn-action-option",3,"click"],[1,"action-description"],[1,"action-form"],[1,"form-fields"],["class","field-group",4,"ngIf"],[1,"field-group"],["placeholder","Informaci\xF3n adicional...",3,"ngModelChange","ngModel"],["type","text","placeholder","TCLU1234567",3,"ngModelChange","ngModel"],["type","text","placeholder","Puerto de Veracruz",3,"ngModelChange","ngModel"],["type","text","placeholder","MSC Diana",3,"ngModelChange","ngModel"],["type","text","placeholder","ADU-2024-001234",3,"ngModelChange","ngModel"],["type","text","placeholder","Bodega Central AGS",3,"ngModelChange","ngModel"]],template:function(l,r){l&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),a(4," \u2190 Volver al Dashboard "),t(),v(5,H,2,1,"h1",4)(6,K,5,5,"div",5),t(),i(7,"div",6)(8,"button",7),f("click",function(){return r.refreshData()}),a(9),t(),v(10,$,2,0,"button",8),t()(),v(11,J,4,0,"div",9)(12,Ce,89,23,"div",10)(13,Oe,20,5,"div",11),t()),l&2&&(o(5),c("ngIf",r.delivery()),o(),c("ngIf",r.delivery()),o(2),c("disabled",r.loading()),o(),u(" ",r.loading()?"\u23F3":"\u{1F504}"," Actualizar "),o(),c("ngIf",r.canAdvanceStatus()),o(),c("ngIf",r.loading()),o(),c("ngIf",!r.loading()&&r.delivery()),o(),c("ngIf",r.showAdvanceStateModal()))},dependencies:[L,V,N,B,W,j,q,F,z],styles:[".delivery-detail-container[_ngcontent-%COMP%]{padding:24px;background:#0f1419;color:#fff;min-height:100vh}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:32px;background:#1a1f2e;padding:24px;border-radius:12px;border:1px solid #2d3748}.btn-back[_ngcontent-%COMP%]{background:#2d3748;color:#a0aec0;border:1px solid #4a5568;padding:8px 16px;border-radius:6px;text-decoration:none;cursor:pointer;font-size:14px;margin-bottom:16px;display:inline-block}.btn-back[_ngcontent-%COMP%]:hover{background:#4a5568;color:#fff}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin:0 0 12px;color:#06d6a0}.status-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:600;color:#fff}.progress-text[_ngcontent-%COMP%]{color:#a0aec0;font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-refresh[_ngcontent-%COMP%], .btn-advance[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all .2s}.btn-refresh[_ngcontent-%COMP%]{background:#2d3748;color:#fff;border:2px solid #4a5568}.btn-refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:#4a5568;border-color:#06d6a0}.btn-advance[_ngcontent-%COMP%]{background:#06d6a0;color:#fff}.btn-advance[_ngcontent-%COMP%]:hover{background:#059669}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #2d3748;border-left-color:#06d6a0;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-spinner.small[_ngcontent-%COMP%]{width:24px;height:24px;border-width:2px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.overview-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.info-card[_ngcontent-%COMP%]{background:#1a1f2e;border:1px solid #2d3748;border-radius:12px;overflow:hidden}.card-header[_ngcontent-%COMP%]{background:#2d3748;padding:16px 20px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#e2e8f0;font-size:16px}.card-content[_ngcontent-%COMP%]{padding:20px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.info-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.info-label[_ngcontent-%COMP%]{color:#a0aec0;font-size:14px}.info-value[_ngcontent-%COMP%]{color:#e2e8f0;font-weight:600;font-size:14px}.info-value.overdue[_ngcontent-%COMP%]{color:#f87171}.progress-section[_ngcontent-%COMP%]{background:#1a1f2e;padding:24px;border-radius:12px;border:1px solid #2d3748}.progress-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#06d6a0}.progress-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:12px;background:#2d3748;border-radius:6px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#06d6a0,#10b981);border-radius:6px;transition:width .5s ease}.progress-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#a0aec0;font-size:14px}.timeline-section[_ngcontent-%COMP%]{background:#1a1f2e;padding:24px;border-radius:12px;border:1px solid #2d3748}.timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.timeline-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#06d6a0}.btn-refresh-timeline[_ngcontent-%COMP%]{padding:8px 16px;background:#2d3748;color:#fff;border:1px solid #4a5568;border-radius:6px;cursor:pointer;font-size:14px}.timeline-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#a0aec0;justify-content:center;padding:24px}.timeline[_ngcontent-%COMP%]{position:relative}.timeline-item[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:32px}.timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.timeline-marker[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}.timeline-dot[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#2d3748;display:flex;align-items:center;justify-content:center;font-size:16px;color:#fff;border:2px solid #4a5568;z-index:1}.timeline-dot.event-issue_po[_ngcontent-%COMP%], .timeline-dot.event-start_prod[_ngcontent-%COMP%]{background:#f59e0b;border-color:#d97706}.timeline-dot.event-factory_ready[_ngcontent-%COMP%], .timeline-dot.event-load_origin[_ngcontent-%COMP%]{background:#3b82f6;border-color:#2563eb}.timeline-dot.event-depart_vessel[_ngcontent-%COMP%], .timeline-dot.event-arrive_dest[_ngcontent-%COMP%]{background:#0891b2;border-color:#0e7490}.timeline-dot.event-customs_clear[_ngcontent-%COMP%], .timeline-dot.event-release[_ngcontent-%COMP%]{background:#8b5cf6;border-color:#7c3aed}.timeline-dot.event-arrive_wh[_ngcontent-%COMP%], .timeline-dot.event-schedule_handover[_ngcontent-%COMP%], .timeline-dot.event-confirm_delivery[_ngcontent-%COMP%]{background:#10b981;border-color:#059669}.timeline-line[_ngcontent-%COMP%]{width:2px;height:40px;background:#4a5568;margin-top:8px}.timeline-content[_ngcontent-%COMP%]{flex:1;padding-top:4px}.event-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.event-title[_ngcontent-%COMP%]{margin:0;color:#e2e8f0;font-size:16px}.event-time[_ngcontent-%COMP%]{color:#a0aec0;font-size:12px;white-space:nowrap}.event-description[_ngcontent-%COMP%]{margin:0 0 16px;color:#a0aec0;font-size:14px;line-height:1.4}.event-meta[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px;background:#0f1419;padding:12px;border-radius:6px;border:1px solid #2d3748}.meta-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.meta-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1;flex-direction:column;align-items:flex-start;gap:4px}.meta-label[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.meta-value[_ngcontent-%COMP%]{color:#e2e8f0;font-size:12px;font-family:monospace}.timeline-empty[_ngcontent-%COMP%]{text-align:center;color:#6b7280;padding:40px}.actions-section[_ngcontent-%COMP%]{background:#1a1f2e;padding:24px;border-radius:12px;border:1px solid #2d3748}.actions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#06d6a0}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px}.action-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#2d3748;padding:20px;border-radius:8px;border:1px solid #4a5568}.action-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#e2e8f0;font-size:14px}.action-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#a0aec0;font-size:12px}.btn-action[_ngcontent-%COMP%]{padding:8px 16px;background:#06d6a0;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:14px}.btn-action[_ngcontent-%COMP%]:hover{background:#059669}.btn-action.requires-confirmation[_ngcontent-%COMP%]{background:#f59e0b}.btn-action.requires-confirmation[_ngcontent-%COMP%]:hover{background:#d97706}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#1a1f2e;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;border:1px solid #2d3748}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #2d3748}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#e2e8f0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#a0aec0;font-size:24px;cursor:pointer}.modal-body[_ngcontent-%COMP%]{padding:24px}.current-status[_ngcontent-%COMP%]{margin-bottom:24px;padding:16px;background:#2d3748;border-radius:8px}.current-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#a0aec0}.current-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.action-selection[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#e2e8f0}.action-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.action-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px;background:#2d3748;border-radius:8px}.btn-action-option[_ngcontent-%COMP%]{padding:8px 16px;background:#06d6a0;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:600;white-space:nowrap}.action-description[_ngcontent-%COMP%]{color:#a0aec0;font-size:14px}.action-form[_ngcontent-%COMP%]{border-top:1px solid #2d3748;padding-top:24px}.action-form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#06d6a0}.form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#a0aec0;font-size:14px;font-weight:600}.field-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;background:#2d3748;border:1px solid #4a5568;border-radius:6px;color:#fff;font-family:inherit}.field-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding:20px 24px;border-top:1px solid #2d3748}.btn-cancel[_ngcontent-%COMP%], .btn-confirm[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:600}.btn-cancel[_ngcontent-%COMP%]{background:#4a5568;color:#fff}.btn-confirm[_ngcontent-%COMP%]{background:#06d6a0;color:#fff}.btn-confirm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.delivery-detail-container[_ngcontent-%COMP%]{padding:16px}.detail-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch}.overview-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.timeline-item[_ngcontent-%COMP%]{gap:16px}.timeline-dot[_ngcontent-%COMP%]{width:32px;height:32px;font-size:14px}.actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-card[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:flex-start}.modal-content[_ngcontent-%COMP%]{width:95%;margin:20px}}"]})}}return n})();export{qe as DeliveryDetailComponent};
