import{p as F}from"./chunk-SCHFUJ5K.js";import{a as D}from"./chunk-YNTR5Z62.js";import"./chunk-ULB2DFX5.js";import{a as I}from"./chunk-YYSQDTD3.js";import"./chunk-QCEAPM7G.js";import{u as z}from"./chunk-S2UEMBMO.js";import{Ea as c,Fa as h,Sa as m,Ua as d,Wa as v,Xb as w,Ya as n,Yb as T,Za as o,_a as O,bb as P,bc as S,cb as g,db as p,ea as M,ib as a,jb as x,kb as _,lb as k,ma as u,na as f,sb as E}from"./chunk-5IDTUAMZ.js";import{g as y}from"./chunk-DM275RSA.js";function j(t,s){if(t&1){let e=P();n(0,"button",12),g("click",function(){let r=u(e).$implicit,l=p();return f(l.selectMarket(r.value))}),a(1),o()}if(t&2){let e=s.$implicit,i=p();v("active",i.selectedMarket===e.value),c(),k(" ",e.emoji," ",e.label," ")}}function B(t,s){if(t&1){let e=P();n(0,"button",13),g("click",function(){let r=u(e).$implicit,l=p();return f(l.selectType(r.value))}),a(1),o()}if(t&2){let e=s.$implicit,i=p();v("active",i.selectedType===e.value),c(),_(" ",e.label," ")}}function L(t,s){t&1&&(n(0,"div",14),O(1,"div",15),n(2,"p"),a(3,"Cargando cat\xE1logo de productos..."),o()())}function N(t,s){t&1&&(n(0,"div",40),a(1," \u2B50 M\xE1s Popular "),o())}function A(t,s){t&1&&(n(0,"span",47),a(1,"Opcional"),o())}function G(t,s){t&1&&(n(0,"span",48),a(1,"Anual"),o())}function q(t,s){if(t&1&&(n(0,"div",41)(1,"div",42)(2,"span",43),a(3),o(),m(4,A,2,0,"span",44)(5,G,2,0,"span",45),o(),n(6,"span",46),a(7),o()()),t&2){let e=s.$implicit,i=p(3);v("optional",e.isOptional),c(3),x(e.name),c(),d("ngIf",e.isOptional),c(),d("ngIf",e.isMultipliedByTerm),c(2),x(i.formatCurrency(e.price))}}function Y(t,s){if(t&1&&(n(0,"span",52),a(1),o()),t&2){let e=s.$implicit;c(),_(" ",e," ")}}function Q(t,s){if(t&1&&(n(0,"div",49)(1,"h4"),a(2,"\u2728 Caracter\xEDsticas"),o(),n(3,"div",50),m(4,Y,2,1,"span",51),o()()),t&2){let e=p().$implicit;c(4),d("ngForOf",e.features)}}function X(t,s){if(t&1&&(n(0,"div",34)(1,"span",35),a(2,"Tasa Anual"),o(),n(3,"span",36),a(4),o()()),t&2){let e=p().$implicit;c(4),_("",(e.rate*100).toFixed(1),"%")}}function K(t,s){if(t&1&&(n(0,"div",34)(1,"span",35),a(2,"Plazos"),o(),n(3,"span",36),a(4),o()()),t&2){let e=p().$implicit;c(4),_("",e.terms.join(", ")," meses")}}function R(t,s){if(t&1){let e=P();n(0,"div",18),m(1,N,2,0,"div",19),n(2,"div",20)(3,"div",21)(4,"h3"),a(5),o(),n(6,"span",22),a(7),o()(),n(8,"div",23)(9,"span",24),a(10),o(),n(11,"span",25),a(12,"Precio base"),o()()(),n(13,"div",26)(14,"div",27)(15,"h4"),a(16,"\u{1F4E6} Componentes del Paquete"),o(),n(17,"div",28),m(18,q,8,6,"div",29),o()(),m(19,Q,5,1,"div",30),n(20,"div",31)(21,"h4"),a(22,"\u{1F4B3} Condiciones Financieras"),o(),n(23,"div",32),m(24,X,5,1,"div",33),n(25,"div",34)(26,"span",35),a(27,"Enganche M\xEDn."),o(),n(28,"span",36),a(29),o()(),m(30,K,5,1,"div",33),o()()(),n(31,"div",37)(32,"button",38),g("click",function(){let r=u(e).$implicit,l=p(2);return f(l.viewDetails(r.id))}),a(33," \u{1F441}\uFE0F Ver Detalles "),o(),n(34,"button",39),g("click",function(){let r=u(e).$implicit,l=p(2);return f(l.startQuote(r))}),a(35," \u{1F4B0} Cotizar Ahora "),o()()()}if(t&2){let e=s.$implicit,i=p(2);v("popular",e.isPopular),c(),d("ngIf",e.isPopular),c(4),x(e.name),c(2),x(i.getMarketLabel(e.market)),c(3),x(i.formatCurrency(e.basePrice)),c(8),d("ngForOf",e.components),c(),d("ngIf",e.features.length>0),c(5),d("ngIf",e.rate),c(5),_("",(e.minDownPayment*100).toFixed(0),"%"),c(),d("ngIf",e.terms&&e.terms.length>0)}}function H(t,s){if(t&1&&(n(0,"div",16),m(1,R,36,11,"div",17),o()),t&2){let e=p();c(),d("ngForOf",e.filteredProducts)("ngForTrackBy",e.trackByProductId)}}function J(t,s){if(t&1){let e=P();n(0,"div",53)(1,"div",54),a(2,"\u{1F50D}"),o(),n(3,"h3"),a(4,"No hay productos disponibles"),o(),n(5,"p"),a(6,"No se encontraron productos para los filtros seleccionados"),o(),n(7,"button",39),g("click",function(){u(e);let r=p();return f(r.resetFilters())}),a(8," Mostrar Todos los Productos "),o()()}}var ie=(()=>{class t{constructor(e,i){this.cotizadorService=e,this.toast=i,this.products=[],this.filteredProducts=[],this.isLoading=!0,this.selectedMarket="all",this.selectedType="all",this.markets=[{value:"all",label:"Todos los Mercados",emoji:"\u{1F30E}"},{value:"aguascalientes",label:"Aguascalientes",emoji:"\u{1F3DC}\uFE0F"},{value:"edomex",label:"Estado de M\xE9xico",emoji:"\u{1F3D9}\uFE0F"}],this.productTypes=[{value:"all",label:"Todos los Tipos"},{value:"plazo",label:"Venta a Plazo"},{value:"directa",label:"Venta Directa"},{value:"colectivo",label:"Cr\xE9dito Colectivo"}]}ngOnInit(){this.loadProducts()}loadProducts(){return y(this,null,function*(){this.isLoading=!0;try{let e=["aguascalientes-plazo","aguascalientes-directa","edomex-plazo","edomex-directa","edomex-colectivo"],i=yield Promise.all(e.map(r=>this.cotizadorService.getProductPackage(r).toPromise()));this.products=i.map((r,l)=>this.transformPackageToProduct(r,e[l])),this.filteredProducts=[...this.products]}catch(e){this.toast.error("Error al cargar el cat\xE1logo de productos"),console.error("Error loading products:",e)}finally{this.isLoading=!1}})}transformPackageToProduct(e,i){let[r,l]=i.split("-"),C=e.components.filter(b=>!b.isOptional).reduce((b,$)=>b+$.price,0),V=this.generateFeatures(r,l,e);return{id:i,name:e.name,market:r,type:l,businessFlow:this.getBusinessFlowFromType(l),basePrice:C,components:e.components,features:V,rate:e.rate>0?e.rate:void 0,terms:e.terms.length>0?e.terms:void 0,minDownPayment:e.minDownPaymentPercentage,isPopular:this.isPopularProduct(i)}}generateFeatures(e,i,r){let l=[];return e==="aguascalientes"?l.push("Mercado Aguascalientes","Operaci\xF3n desde D\xEDa 1"):l.push("Mercado EdoMex","Documentaci\xF3n de Ecosistema"),i==="colectivo"&&l.push(`Grupo de ${r.defaultMembers||5} miembros`,"Entrega por Tandas"),i==="plazo"?l.push("Financiamiento Disponible","Pagos Mensuales"):i==="directa"&&l.push("Pago de Contado","Entrega Inmediata"),r.components.some(C=>C.name.includes("GNV"))&&l.push("Conversi\xF3n GNV Incluida"),r.components.some(C=>C.name.includes("GPS"))&&l.push("Paquete Tecnol\xF3gico"),l}getBusinessFlowFromType(e){switch(e){case"plazo":return"Venta a Plazo";case"directa":return"Venta Directa";case"colectivo":return"Cr\xE9dito Colectivo";default:return"Venta a Plazo"}}isPopularProduct(e){return e==="edomex-plazo"||e==="aguascalientes-plazo"}selectMarket(e){this.selectedMarket=e,this.applyFilters()}selectType(e){this.selectedType=e,this.applyFilters()}applyFilters(){this.filteredProducts=this.products.filter(e=>{let i=this.selectedMarket==="all"||e.market===this.selectedMarket,r=this.selectedType==="all"||e.type===this.selectedType;return i&&r})}resetFilters(){this.selectedMarket="all",this.selectedType="all",this.filteredProducts=[...this.products]}getMarketLabel(e){return{aguascalientes:"Aguascalientes",edomex:"Estado de M\xE9xico"}[e]||e}formatCurrency(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(e)}trackByProductId(e,i){return i.id}viewDetails(e){this.toast.info(`Viendo detalles de ${e}`)}startQuote(e){let i=e.type==="colectivo"?"/cotizador/edomex-colectivo":"/cotizador";this.toast.success(`Iniciando cotizaci\xF3n para ${e.name}`)}static{this.\u0275fac=function(i){return new(i||t)(h(D),h(I))}}static{this.\u0275cmp=M({type:t,selectors:[["app-productos-catalog"]],standalone:!0,features:[E],decls:15,vars:5,consts:[[1,"productos-container"],[1,"page-header"],[1,"header-content"],[1,"page-description"],[1,"filters-section"],[1,"market-filters"],["class","filter-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"type-filters"],["class","type-filter",3,"active","click",4,"ngFor","ngForOf"],["class","loading-container",4,"ngIf"],["class","productos-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"filter-btn",3,"click"],[1,"type-filter",3,"click"],[1,"loading-container"],[1,"loading-spinner"],[1,"productos-grid"],["class","producto-card",3,"popular",4,"ngFor","ngForOf","ngForTrackBy"],[1,"producto-card"],["class","popular-badge",4,"ngIf"],[1,"producto-header"],[1,"producto-title"],[1,"producto-market"],[1,"producto-price"],[1,"price-amount"],[1,"price-label"],[1,"producto-body"],[1,"components-section"],[1,"components-list"],["class","component-item",3,"optional",4,"ngFor","ngForOf"],["class","features-section",4,"ngIf"],[1,"financial-section"],[1,"financial-grid"],["class","financial-item",4,"ngIf"],[1,"financial-item"],[1,"financial-label"],[1,"financial-value"],[1,"producto-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"popular-badge"],[1,"component-item"],[1,"component-info"],[1,"component-name"],["class","component-type",4,"ngIf"],["class","component-type multiplied",4,"ngIf"],[1,"component-price"],[1,"component-type"],[1,"component-type","multiplied"],[1,"features-section"],[1,"features-list"],["class","feature-tag",4,"ngFor","ngForOf"],[1,"feature-tag"],[1,"empty-state"],[1,"empty-icon"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),a(4,"\u{1F690} Cat\xE1logo de Productos"),o(),n(5,"p",3),a(6,"Paquetes de unidades vehiculares por mercado"),o()()(),n(7,"div",4)(8,"div",5),m(9,j,2,4,"button",6),o(),n(10,"div",7),m(11,B,2,3,"button",8),o()(),m(12,L,4,0,"div",9)(13,H,2,2,"div",10)(14,J,9,0,"div",11),o()),i&2&&(c(9),d("ngForOf",r.markets),c(2),d("ngForOf",r.productTypes),c(),d("ngIf",r.isLoading),c(),d("ngIf",!r.isLoading),c(),d("ngIf",!r.isLoading&&r.filteredProducts.length===0))},dependencies:[S,w,T,z,F],styles:[".productos-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:2.5rem;font-weight:700}.page-description[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:1.1rem}.filters-section[_ngcontent-%COMP%]{margin-bottom:32px;display:flex;flex-direction:column;gap:16px}.market-filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{padding:12px 24px;border:2px solid #e2e8f0;border-radius:12px;background:#fff;color:#4a5568;font-weight:600;cursor:pointer;transition:all .2s;font-size:1rem}.filter-btn.active[_ngcontent-%COMP%]{border-color:#4299e1;background:#4299e1;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #4299e14d}.filter-btn[_ngcontent-%COMP%]:hover:not(.active){border-color:#cbd5e0;background:#f7fafc}.type-filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px;flex-wrap:wrap}.type-filter[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #e2e8f0;border-radius:20px;background:#fff;color:#718096;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s}.type-filter.active[_ngcontent-%COMP%]{border-color:#48bb78;background:#48bb78;color:#fff}.type-filter[_ngcontent-%COMP%]:hover:not(.active){background:#f7fafc}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:80px 20px;color:#718096}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-left-color:#4299e1;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.productos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:24px;margin-bottom:40px}.producto-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;border:1px solid #e2e8f0;overflow:hidden;transition:all .3s;position:relative}.producto-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #0000001a;border-color:#cbd5e0}.producto-card.popular[_ngcontent-%COMP%]{border-color:#f6ad55;box-shadow:0 0 0 2px #f6ad5533}.popular-badge[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:linear-gradient(135deg,#f6ad55,#ed8936);color:#fff;padding:6px 12px;border-radius:20px;font-size:.8rem;font-weight:600;z-index:1}.producto-header[_ngcontent-%COMP%]{padding:24px;background:#f7fafc;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:flex-start}.producto-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#2d3748;font-size:1.3rem;font-weight:700}.producto-market[_ngcontent-%COMP%]{background:#4299e1;color:#fff;padding:4px 12px;border-radius:12px;font-size:.8rem;font-weight:600}.producto-price[_ngcontent-%COMP%]{text-align:right}.price-amount[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#48bb78;font-family:monospace}.price-label[_ngcontent-%COMP%]{font-size:.8rem;color:#718096}.producto-body[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column;gap:20px}.components-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .features-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .financial-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#4a5568;font-size:1rem;font-weight:600}.components-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.component-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:#f7fafc;border-radius:8px;border:1px solid #e2e8f0}.component-item.optional[_ngcontent-%COMP%]{border-left:3px solid #4299e1}.component-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1}.component-name[_ngcontent-%COMP%]{font-weight:500;color:#2d3748}.component-type[_ngcontent-%COMP%]{background:#4299e1;color:#fff;padding:2px 8px;border-radius:10px;font-size:.7rem;font-weight:600}.component-type.multiplied[_ngcontent-%COMP%]{background:#ed8936}.component-price[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:#48bb78;font-size:.9rem}.features-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.feature-tag[_ngcontent-%COMP%]{background:#e6fffa;color:#2d7d68;padding:6px 12px;border-radius:16px;font-size:.8rem;font-weight:500;border:1px solid #b2f5ea}.financial-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.financial-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:12px;background:#f7fafc;border-radius:8px;border:1px solid #e2e8f0}.financial-label[_ngcontent-%COMP%]{font-size:.8rem;color:#718096;margin-bottom:4px}.financial-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#2d3748}.producto-actions[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid #e2e8f0;display:flex;gap:12px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border-radius:8px;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .2s;border:none;display:flex;align-items:center;justify-content:center;gap:6px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78,#38a169);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#38a169,#2f855a);transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;color:#718096}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#4a5568;font-size:1.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:1.1rem}@media (max-width: 768px){.productos-container[_ngcontent-%COMP%]{padding:16px}.productos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.producto-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.financial-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.producto-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return t})();export{ie as ProductosCatalogComponent};
