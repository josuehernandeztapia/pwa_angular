import{a as O}from"./chunk-NH6JDP7H.js";import{m as P,p as M}from"./chunk-SCHFUJ5K.js";import{Ea as s,Fa as f,Sa as x,Ua as p,Xb as b,Ya as t,Yb as C,Za as n,bc as v,cb as c,db as d,ea as h,ib as i,jb as u,kb as m,sb as _}from"./chunk-5IDTUAMZ.js";import"./chunk-DM275RSA.js";function k(r,g){if(r&1&&(t(0,"span",25),i(1),n()),r&2){let e=g.$implicit,o=d(2);s(),m(" ",o.getPermissionLabel(e)," ")}}function y(r,g){if(r&1&&(t(0,"span",26),i(1),n()),r&2){let e=d(2);s(),m(" +",e.currentUser.permissions.length-3," ")}}function z(r,g){if(r&1&&(t(0,"div",16)(1,"div",17)(2,"div",18),i(3),n(),t(4,"div",19)(5,"div",20),i(6),n(),t(7,"div",21),i(8),n(),t(9,"div",22),x(10,k,2,1,"span",23)(11,y,2,1,"span",24),n()()()()),r&2){let e=d();s(3),u(e.getUserInitials()),s(3),u(e.currentUser.name),s(2),u(e.getRoleLabel(e.currentUser.role)),s(2),p("ngForOf",e.currentUser.permissions.slice(0,3)),s(),p("ngIf",e.currentUser.permissions.length>3)}}var F=(()=>{class r{constructor(e,o){this.router=e,this.authService=o,this.currentUser$=this.authService.currentUser$,this.currentUser=this.authService.getCurrentUser()}goHome(){this.router.navigate(["/dashboard"])}goBack(){window.history.length>1?window.history.back():this.goHome()}getUserInitials(){if(!this.currentUser)return"??";let e=this.currentUser.name.split(" ");return e.length>=2?`${e[0][0]}${e[1][0]}`.toUpperCase():this.currentUser.name.substring(0,2).toUpperCase()}getRoleLabel(e){return{asesor:"Asesor Financiero",supervisor:"Supervisor",admin:"Administrador"}[e]||e}getPermissionLabel(e){return{"read:clients":"Ver Clientes","write:quotes":"Crear Cotizaciones","read:reports":"Ver Reportes","approve:quotes":"Aprobar Cotizaciones","manage:team":"Gestionar Equipo"}[e]||e}contactSupervisor(){console.log("Contacting supervisor..."),window.open("mailto:supervisor@conductores.com?subject=Solicitud de Permisos","_blank")}viewPermissions(){console.log("Viewing permissions..."),alert(`Tus permisos actuales:
`+this.currentUser?.permissions.join(`
`))}requestAccess(){console.log("Requesting access..."),this.router.navigate(["/solicitar-acceso"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}static{this.\u0275fac=function(o){return new(o||r)(f(P),f(O))}}static{this.\u0275cmp=h({type:r,selectors:[["app-unauthorized"]],standalone:!0,features:[_],decls:33,vars:2,consts:[[1,"unauthorized-container"],[1,"unauthorized-content"],[1,"error-illustration"],[1,"error-icon"],[1,"error-message"],[1,"message-section"],["class","user-info",4,"ngIf"],[1,"action-section"],[1,"btn-primary",3,"click"],[1,"btn-secondary",3,"click"],[1,"help-section"],[1,"help-actions"],[1,"help-btn",3,"click"],[1,"logout-section"],[1,"logout-text"],[1,"logout-btn",3,"click"],[1,"user-info"],[1,"user-card"],[1,"user-avatar"],[1,"user-details"],[1,"user-name"],[1,"user-role"],[1,"user-permissions"],["class","permission-chip",4,"ngFor","ngForOf"],["class","permission-chip more",4,"ngIf"],[1,"permission-chip"],[1,"permission-chip","more"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i(4,"\u{1F6AB}"),n(),t(5,"div",4),i(6,"No Autorizado"),n()(),t(7,"div",5)(8,"h1"),i(9,"Acceso Restringido"),n(),t(10,"p"),i(11," No tienes los permisos necesarios para acceder a esta secci\xF3n. Si crees que esto es un error, contacta a tu supervisor. "),n()(),x(12,z,12,5,"div",6),t(13,"div",7)(14,"button",8),c("click",function(){return a.goHome()}),i(15," \u{1F3E0} Volver al Dashboard "),n(),t(16,"button",9),c("click",function(){return a.goBack()}),i(17," \u2B05\uFE0F Regresar "),n()(),t(18,"div",10)(19,"h3"),i(20,"\xBFNecesitas m\xE1s permisos?"),n(),t(21,"div",11)(22,"button",12),c("click",function(){return a.contactSupervisor()}),i(23," \u{1F454} Contactar Supervisor "),n(),t(24,"button",12),c("click",function(){return a.viewPermissions()}),i(25," \u{1F50D} Ver mis Permisos "),n(),t(26,"button",12),c("click",function(){return a.requestAccess()}),i(27," \u{1F4DD} Solicitar Acceso "),n()()(),t(28,"div",13)(29,"p",14),i(30),n(),t(31,"button",15),c("click",function(){return a.logout()}),i(32," \u{1F6AA} Cerrar Sesi\xF3n "),n()()()()),o&2&&(s(12),p("ngIf",a.currentUser),s(18),m("\xBFNo eres ",a.currentUser==null?null:a.currentUser.name,"?"))},dependencies:[v,b,C,M],styles:[".unauthorized-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#e53e3e,#c53030);padding:20px}.unauthorized-content[_ngcontent-%COMP%]{background:#fffffff2;border-radius:20px;padding:40px;text-align:center;max-width:500px;width:100%;box-shadow:0 20px 60px #0003;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.error-illustration[_ngcontent-%COMP%]{margin-bottom:32px}.error-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:16px;animation:_ngcontent-%COMP%_shake .5s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.error-message[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#e53e3e;margin-bottom:8px}.message-section[_ngcontent-%COMP%]{margin-bottom:32px}.message-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2d3748;font-size:1.8rem;font-weight:600;margin-bottom:16px}.message-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem;line-height:1.6;margin:0}.user-info[_ngcontent-%COMP%]{margin-bottom:32px}.user-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;background:#f7fafc;padding:20px;border-radius:12px;border:2px solid #e2e8f0}.user-avatar[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,#4299e1,#3182ce);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;color:#fff;flex-shrink:0}.user-details[_ngcontent-%COMP%]{flex:1;text-align:left}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:#2d3748;margin-bottom:4px}.user-role[_ngcontent-%COMP%]{color:#4a5568;font-size:.9rem;margin-bottom:8px}.user-permissions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.permission-chip[_ngcontent-%COMP%]{background:#e2e8f0;color:#4a5568;font-size:.75rem;padding:4px 8px;border-radius:12px;font-weight:500}.permission-chip.more[_ngcontent-%COMP%]{background:#cbd5e0}.action-section[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;margin-bottom:32px;flex-wrap:wrap}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4299e1,#3182ce);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3182ce,#2c5282);transform:translateY(-2px);box-shadow:0 8px 20px #4299e14d}.btn-secondary[_ngcontent-%COMP%]{background:#f7fafc;color:#4a5568;border:2px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#cbd5e0}.help-section[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0;padding-top:24px;margin-bottom:24px}.help-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:1.1rem;font-weight:600;margin-bottom:16px}.help-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center}.help-btn[_ngcontent-%COMP%]{background:none;border:none;color:#4299e1;font-size:.9rem;cursor:pointer;padding:8px 16px;border-radius:6px;transition:all .2s;display:inline-flex;align-items:center;gap:8px}.help-btn[_ngcontent-%COMP%]:hover{background:#4299e11a;color:#3182ce}.logout-section[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0;padding-top:20px}.logout-text[_ngcontent-%COMP%]{color:#718096;font-size:.9rem;margin-bottom:12px}.logout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e53e3e,#c53030);color:#fff;border:none;padding:10px 20px;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:8px}.logout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#c53030,#9c2626);transform:translateY(-1px)}@media (max-width: 480px){.unauthorized-content[_ngcontent-%COMP%]{padding:32px 24px}.user-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.user-details[_ngcontent-%COMP%]{text-align:center}.action-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;max-width:200px;justify-content:center}}"]})}}return r})();export{F as UnauthorizedComponent};
